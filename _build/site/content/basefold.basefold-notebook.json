{"version":2,"kind":"Notebook","sha256":"57e4615eeaf13de158b98c558e5ddb6b143e5ec1b4a4e793e3698bcf5fe426fa","slug":"basefold.basefold-notebook","location":"/basefold/basefold-notebook.ipynb","dependencies":[],"frontmatter":{"title":"What does Sumcheck prove?","content_includes_title":true,"kernelspec":{"name":"sagemath","display_name":"SageMath 10.6","language":"sage"},"github":"https://github.com/executablebooks/jupyter-book","numbering":{"title":{"offset":1}},"edit_url":"https://github.com/executablebooks/jupyter-book/blob/main/basefold/basefold-notebook.ipynb","exports":[{"format":"ipynb","filename":"basefold-notebook.ipynb","url":"/basefold-notebook-f772a5e7705db8314a714c48e73d656e.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What does Sumcheck prove?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DQTQ85XNgD"}],"identifier":"what-does-sumcheck-prove","label":"What does Sumcheck prove?","html_id":"what-does-sumcheck-prove","implicit":true,"key":"QyypBOEVF5"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"For a polynomial ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cK6lJDxQJk"},{"type":"inlineCode","value":"f : ùîΩ¬≤ ‚Üí ùîΩ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Ek6ZRSzGl4"},{"type":"text","value":" (here ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XiGtn1Mzun"},{"type":"inlineCode","value":"n = 3","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yxiW1wzN66"},{"type":"text","value":") given ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aV5FnWkp39"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"as a black box","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LCnCkFH2GO"}],"key":"okZnMMYNWf"},{"type":"text","value":",","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zTkAX71jcY"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IhnlcV7rPW"},{"type":"text","value":"the Prover wants to convince the Verifier that","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GAdDYBcPLi"}],"key":"a75fc1r01I"},{"type":"math","value":"S = \\sum_{x \\in \\{0,1\\}^3} f(x) \\quad (= 36 \\text{ in our example})","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"tight":"before","html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>S</mi><mo>=</mo><munder><mo>‚àë</mo><mrow><mi>x</mi><mo>‚àà</mo><mo stretchy=\"false\">{</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><msup><mo stretchy=\"false\">}</mo><mn>3</mn></msup></mrow></munder><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mspace width=\"1em\"/><mo stretchy=\"false\">(</mo><mo>=</mo><mn>36</mn><mtext>¬†in¬†our¬†example</mtext><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">S = \\sum_{x \\in \\{0,1\\}^3} f(x) \\quad (= 36 \\text{ in our example})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.566em;vertical-align:-1.516em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.05em;\"><span style=\"top:-1.809em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">‚àà</span><span class=\"mopen mtight\">{</span><span class=\"mord mtight\">0</span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\"><span class=\"mclose mtight\">}</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463em;\"><span style=\"top:-2.786em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">‚àë</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.516em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mopen\">(</span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">36</span><span class=\"mord text\"><span class=\"mord\">¬†in¬†our¬†example</span></span><span class=\"mclose\">)</span></span></span></span></span>","enumerator":"1","key":"ex71rTgRtz"}],"key":"f3P3icKkiI"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"without sending all ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"V8uI57SLAe"},{"type":"inlineCode","value":"2‚Åø","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"sgCzZ4Rk38"},{"type":"text","value":" evaluations.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"iVh3xtk25U"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Nf1hN9bbj9"},{"type":"text","value":"Sumcheck does it in ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"CqEtvbdCQ7"},{"type":"emphasis","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"n","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Nz5finjteF"}],"key":"hriNE5wtoS"},{"type":"text","value":" rounds:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ogfiVoRoT9"}],"key":"Lf1akqQGTj"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Round i","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rceIvbqBDN"}],"key":"UeZsyWrhNO"},{"type":"text","value":" Prover sends a univariate degree-‚â§ d polynomial ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OlQFyyUUPg"},{"type":"inlineCode","value":"g·µ¢","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PhT2HdsdcC"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zDWzfDwcja"}],"key":"P5pQc2yxxO"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Verifier checks ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"iFYPDzuLSq"},{"type":"inlineCode","value":"g·µ¢(0)+g·µ¢(1) = claimed_sum","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"tqklv1XorE"},{"type":"text","value":".","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"hIuyJofrid"}],"key":"uoKJ4OeUEn"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Verifier samples a random field element ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"jqNG3pc1qC"},{"type":"inlineCode","value":"r·µ¢","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Ooh546vQ9M"},{"type":"text","value":" and sends it back.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"eCFh4wbUyO"}],"key":"DvopckH1mu"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Both parties restrict ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"WzX5dILmD0"},{"type":"inlineCode","value":"f","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"fmLBW8sdNq"},{"type":"text","value":" to that slice and continue with ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"uxdTjNKCI4"},{"type":"inlineCode","value":"n ‚àí i ‚àí 1","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"nf2NzJYhyh"},{"type":"text","value":" variables.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ku5QX3D6Rp"}],"key":"yRopRq7eCr"}],"key":"LAcopiwxnv"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Soundness error ‚â§ ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"S07CCPMgVe"},{"type":"inlineCode","value":"d/|ùîΩ|","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"drNAigBCqd"},{"type":"text","value":" per round.  (We use plain integers for clarity.)","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"prcvXOgpjC"}],"key":"waoVQIg7m7"}],"key":"zrsR0wlM4U"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"sage","executable":true,"value":"\nimport matplotlib.pyplot as plt\nimport sympy as sp\nfrom mpl_toolkits.mplot3d import Axes3D   \n\n\ndef bits(i, n):\n    \"Return i as an n-bit *list* (big-endian).\"\n    return list(map(int, format(i, f'0{n}b')))\n\ndef bits_reverse(i, n):\n    \"Little-endian version (least-significant bit first).\"\n    return bits(i, n)[::-1]\n\ndef eq_tilde(bits_i, u_vector):\n    result=1\n    for bit,u in zip(bits_i,u_vector):\n        result *= (1-bit)*(1-u) + bit*u\n    return result\n\ndef bits_of(i: int, n: int = 3):\n    \"\"\"Return the n-bit little-endian tuple of i (e.g. 5 ‚Üí (1,0,1)).\"\"\"\n    return tuple((i >> j) & 1 for j in range(n))\n\nf_vec = [1, 2, 3, 4, 5, 6, 7, 8]               # f(0,0,0) ‚Ä¶ f(1,1,1)\nprint(\"evaluations= \", f_vec)\n\nn = 3\nX0, X1, X2 = sp.symbols(f\"x0:{n}\")   # good\nX = (X0, X1, X2)              # (X0, X1, X2)\n\nf_tilde = sum(coeff * eq_tilde(bits(i, n), X)\n              for i, coeff in enumerate(f_vec))\n\n\nN = len(f_vec)\n\nprint(\"MLE polynomial in evaluation form:\\n\")\nfor i in range(N):\n    term = eq_tilde(bits(i, n), X)\n    print(f\"a[{i}] = {f_vec[i]} => term = {f_vec[i]}*({term})\")\n\nprint(\"\\nExpanded polynomial:\")\nsp.pretty_print(sp.expand(f_tilde))\n\ncoords  = [bits_of(i, 3) for i in range(8)]   \n\n# 3-D scatter plot\nfig = plt.figure()\nax  = fig.add_subplot(111, projection='3d')\nxs, ys, zs = zip(*coords)\n\nax.scatter(xs, ys, zs, s=60)\n\n# annotate each vertex with its f-value\nfor (x0, x1, x2), val in zip(coords, f_vec):\n    ax.text(x0, x1, x2, f\"{val}\", fontsize=10, ha='center')\n\nax.set_xlabel(\"X‚ÇÄ\")\nax.set_ylabel(\"X‚ÇÅ\")\nax.set_zlabel(\"X‚ÇÇ\")\nax.set_title(\"Evaluation vector  f  on {0,1}¬≥\")\n\nplt.show()\n\n# first-round h‚ÇÅ(X) polynomial\n\n# Even half  (X‚ÇÄ = 0)\ng1_0 = sum(f_vec[idx] for idx in range(8) if bits_of(idx)[0] == 0)\n# Odd  half  (X‚ÇÄ = 1)\ng1_1 = sum(f_vec[idx] for idx in range(8) if bits_of(idx)[0] == 1)\n\n# h‚ÇÅ(X) = a + b¬∑X\na = g1_0\nb = g1_1 - g1_0\n\nprint(\"\\n‚îÄ‚îÄ First-round Sumcheck polynomial  h‚ÇÅ(X) ‚îÄ‚îÄ\")\nprint(f\"h‚ÇÅ(X) = {a}  +  {b}¬∑X\")\nprint(f\"h‚ÇÅ(0) = {a}        (even-half sum)\")\nprint(f\"h‚ÇÅ(1) = {a + b}    (odd-half  sum)\")\nprint(f\"h‚ÇÅ(2) = {a + 2*b}  (third evaluation sent to the verifier)\")\n\n\n","key":"a0zXFTXluX"},{"type":"output","id":"vvs3e2YyL8W7CcE33Ao0f","data":[{"name":"stdout","output_type":"stream","text":"evaluations=  [1, 2, 3, 4, 5, 6, 7, 8]\nMLE polynomial in evaluation form:\n\na[0] = 1 => term = 1*(-(x0 - 1)*(x1 - 1)*(x2 - 1))\na[1] = 2 => term = 2*((x0 - 1)*(x1 - 1)*x2)\na[2] = 3 => term = 3*((x0 - 1)*x1*(x2 - 1))\na[3] = 4 => term = 4*(-(x0 - 1)*x1*x2)\na[4] = 5 => term = 5*(x0*(x1 - 1)*(x2 - 1))\na[5] = 6 => term = 6*(-x0*(x1 - 1)*x2)\na[6] = 7 => term = 7*(-x0*x1*(x2 - 1))\na[7] = 8 => term = 8*(x0*x1*x2)\n\nExpanded polynomial:\n4‚ãÖx‚ÇÄ + 2‚ãÖx‚ÇÅ + x‚ÇÇ + 1\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"84ce1cc3f4c9c6affca038220ec35263","path":"/84ce1cc3f4c9c6affca038220ec35263.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}},{"name":"stdout","output_type":"stream","text":"\n‚îÄ‚îÄ First-round Sumcheck polynomial  h‚ÇÅ(X) ‚îÄ‚îÄ\nh‚ÇÅ(X) = 16  +  4¬∑X\nh‚ÇÅ(0) = 16        (even-half sum)\nh‚ÇÅ(1) = 20    (odd-half  sum)\nh‚ÇÅ(2) = 24  (third evaluation sent to the verifier)\n"}],"key":"ZKHnPMs9kC"}],"key":"MEgxOGTPzV"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"sage","executable":true,"value":"import random\nrandom.seed(int(12345))        # deterministic for the demo\n\n# verifier samples Œ±‚ÇÄ\nalpha0 = random.randint(2, 9)\nprint(f\"Verifier samples  Œ±‚ÇÄ = {alpha0}\")\n\n# fold the vector:  f¬π(x‚ÇÅ,x‚ÇÇ) = f(Œ±‚ÇÄ, x‚ÇÅ, x‚ÇÇ) \n# even half  = indices where X‚ÇÄ = 0   (0,1,2,3)\n# odd  half  = indices where X‚ÇÄ = 1   (4,5,6,7)\nf_even = f_vec[0:4]\nf_odd  = f_vec[4:8]\n\nf_fold = [(1 - alpha0) * e + alpha0 * o     # (1-Œ±)¬∑even + Œ±¬∑odd\n          for e, o in zip(f_even, f_odd)]\n\nprint(\"\\nFolded 4-point vector  f¬π  on the (X‚ÇÅ,X‚ÇÇ) plane:\")\nfor idx, val in enumerate(f_fold):\n    print(f\"  ({bits_of(idx,2)[0]}, {bits_of(idx,2)[1]})  ‚Üí  {val}\")\n\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# Arrange f_fold = [f(0,0), f(1,0), f(0,1), f(1,1)] into a 2-by-2 matrix\ngrid = np.array([[f_fold[0], f_fold[1]],\n                 [f_fold[2], f_fold[3]]])\n\nfig, ax = plt.subplots(figsize=(4, 4))\nim = ax.imshow(grid,\n               cmap=\"Blues\",\n               origin=\"lower\",            # (0,0) in the lower-left corner\n               extent=[-0.5, 1.5, -0.5, 1.5],\n               vmin=grid.min(), vmax=grid.max())\n\n# Annotate each cell with its numeric value\nfor (i, j), val in np.ndenumerate(grid):\n    ax.text(j, i, f\"{val:.0f}\",\n            ha=\"center\", va=\"center\", color=\"black\", fontsize=14)\n\nax.set_xticks([0, 1])\nax.set_yticks([0, 1])\nax.set_xlabel(\"X‚ÇÅ\")\nax.set_ylabel(\"X‚ÇÇ\")\nax.set_title(\"Folded function  $f^{(1)}$  after Round 1\")\n\nplt.colorbar(im, shrink=0.75, label=\"value\")\nplt.show()\n","key":"mE7kPm9Qzj"},{"type":"output","id":"2JM4AU_GQ262fpCulP0c5","data":[{"name":"stdout","output_type":"stream","text":"Verifier samples  Œ±‚ÇÄ = 8\n\nFolded 4-point vector  f¬π  on the (X‚ÇÅ,X‚ÇÇ) plane:\n  (0, 0)  ‚Üí  33\n  (1, 0)  ‚Üí  34\n  (0, 1)  ‚Üí  35\n  (1, 1)  ‚Üí  36\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"00b3d81c2c6a284dea496d500547724b","path":"/00b3d81c2c6a284dea496d500547724b.png"},"text/plain":{"content":"<Figure size 400x400 with 2 Axes>","content_type":"text/plain"}}}],"key":"B7JD22Cuem"}],"key":"d5FmiuH8OY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"sage","executable":true,"value":"# partial sums over X‚ÇÅ\ng2_0 = f_fold[0] + f_fold[1]          # X‚ÇÅ = 0  (indices 00, 01)\ng2_1 = f_fold[2] + f_fold[3]          # X‚ÇÅ = 1  (indices 10, 11)\n\na2 = g2_0\nb2 = g2_1 - g2_0                    \n\nprint(\"\\n‚îÄ‚îÄ Second-round polynomial  h‚ÇÇ(X)  ‚îÄ‚îÄ\")\nprint(f\"h‚ÇÇ(X) = {a2:.1f}  +  {b2:.1f}¬∑X\")\nprint(f\"h‚ÇÇ(0) = {a2:.1f}\")\nprint(f\"h‚ÇÇ(1) = {a2 + b2:.1f}\")\nprint(f\"h‚ÇÇ(2) = {a2 + 2*b2:.1f}\")\n\nprint(f\"a2        = {a2}\")\nprint(f\"b2        = {b2}\")\nprint(f\"h‚ÇÇ(0)+h‚ÇÇ(1)  = {a2 + (a2 + b2)}\")\nprint(f\"Œ£ f_fold     = {sum(f_fold)}\")\n\n\n# verifier checks the sum relation\nassert abs((a2) + (a2 + b2) - sum(f_fold)) < 1e-9\nprint(\"Verifier check  h‚ÇÇ(0)+h‚ÇÇ(1)  =  Œ£ f¬π(x)   ‚úì\")\n","key":"tKlXjTkbBa"},{"type":"output","id":"Z0xNxXndUljtDFkjkcEqX","data":[{"name":"stdout","output_type":"stream","text":"\n‚îÄ‚îÄ Second-round polynomial  h‚ÇÇ(X)  ‚îÄ‚îÄ\nh‚ÇÇ(X) = 67.0  +  4.0¬∑X\nh‚ÇÇ(0) = 67.0\nh‚ÇÇ(1) = 71.0\nh‚ÇÇ(2) = 75.0\na2        = 67\nb2        = 4\nh‚ÇÇ(0)+h‚ÇÇ(1)  = 138\nŒ£ f_fold     = 138\nVerifier check  h‚ÇÇ(0)+h‚ÇÇ(1)  =  Œ£ f¬π(x)   ‚úì\n"}],"key":"TnZS9GmHoW"}],"key":"I8DmkessUf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"sage","executable":true,"value":"# sample Œ±‚ÇÅ \nalpha1 = random.randint(2, 9)\nprint(f\"\\nVerifier samples  Œ±‚ÇÅ = {alpha1}\")\n\n# fold again over X‚ÇÅ \nf1_even = f_fold[0:2]                 # X‚ÇÅ = 0 slice\nf1_odd  = f_fold[2:4]                 # X‚ÇÅ = 1 slice\nf_fold2 = [(1 - alpha1) * e + alpha1 * o\n           for e, o in zip(f1_even, f1_odd)]     # length 2\n\nprint(\"Folded vector  f¬≤  (depends only on X‚ÇÇ now):\", f_fold2)\n\n# build h‚ÇÉ(X) over the last variable X‚ÇÇ \ng3_0, g3_1 = f_fold2                  \na3 = g3_0\nb3 = g3_1 - g3_0\n\nprint(\"\\n‚îÄ‚îÄ Third-round polynomial  h‚ÇÉ(X)  ‚îÄ‚îÄ\")\nprint(f\"h‚ÇÉ(X) = {a3:.1f}  +  {b3:.1f}¬∑X\")\nprint(f\"h‚ÇÉ(0) = {a3:.1f}\")\nprint(f\"h‚ÇÉ(1) = {a3 + b3:.1f}\")\nprint(f\"h‚ÇÉ(2) = {a3 + 2*b3:.1f}\")\n\n# final leaf opening \nalpha2 = random.randint(0, 1)       \nleaf   = f_fold2[alpha2]\nprint(f\"\\nVerifier picks  Œ±‚ÇÇ = {alpha2}   and asks for  f¬≤(Œ±‚ÇÇ) = {leaf:.1f}\")\nassert abs(leaf - (a3 + b3*alpha2)) < 1e-9\nprint(\"Leaf equals h‚ÇÉ(Œ±‚ÇÇ)   ‚úì\")\n\nprint(\"\\n‚úÖ  Sumcheck for n = 3 completed ‚Äì all rounds verified.\\n\")\n","key":"xReajYAvhA"},{"type":"output","id":"qkt3k6ANiz71KysdAsnmN","data":[{"name":"stdout","output_type":"stream","text":"\nVerifier samples  Œ±‚ÇÅ = 2\nFolded vector  f¬≤  (depends only on X‚ÇÇ now): [37, 38]\n\n‚îÄ‚îÄ Third-round polynomial  h‚ÇÉ(X)  ‚îÄ‚îÄ\nh‚ÇÉ(X) = 37.0  +  1.0¬∑X\nh‚ÇÉ(0) = 37.0\nh‚ÇÉ(1) = 38.0\nh‚ÇÉ(2) = 39.0\n\nVerifier picks  Œ±‚ÇÇ = 1   and asks for  f¬≤(Œ±‚ÇÇ) = 38.0\nLeaf equals h‚ÇÉ(Œ±‚ÇÇ)   ‚úì\n\n‚úÖ  Sumcheck for n = 3 completed ‚Äì all rounds verified.\n\n"}],"key":"qjElxokSFg"}],"key":"bI9tCATFXR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"sage","executable":true,"value":"\nn = 3\nX = sp.symbols(f'X0:{n}')                       # (X0, X1, X2)\nf_tilde = sum(coeff * eq_tilde(bits(i, n), X)\n              for i, coeff in enumerate(f_vec))\n\n\n\n# 2. Evaluate it at the verifier‚Äôs random challenges\npoly_val = f_tilde.subs({X[0]: alpha0,\n                         X[1]: alpha1,\n                         X[2]: alpha2})\n\nprint(\"‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\")\nprint(f\"fÃÉ(Œ±‚ÇÄ, Œ±‚ÇÅ, Œ±‚ÇÇ) = fÃÉ({alpha0}, {alpha1}, {alpha2})  =  {poly_val}\")\nprint(f\"leaf opened in the final Sumcheck round         =  {leaf}\")\nprint(\"‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\")\nassert poly_val == leaf\nprint(\"‚úÖ  They match ‚Äì Sumcheck transcript is fully consistent.\\n\")\n","key":"bwr1tRBH3v"},{"type":"output","id":"i-_1w_mU3e6y7UfeOo-BZ","data":[{"name":"stdout","output_type":"stream","text":"‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\nfÃÉ(Œ±‚ÇÄ, Œ±‚ÇÅ, Œ±‚ÇÇ) = fÃÉ(8, 2, 1)  =  38\nleaf opened in the final Sumcheck round         =  38\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n‚úÖ  They match ‚Äì Sumcheck transcript is fully consistent.\n\n"}],"key":"uRLSzSfz4c"}],"key":"Nm5L3zwAb2"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What‚Äôs still missing after Sumcheck?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NvNQZDzS4C"}],"identifier":"whats-still-missing-after-sumcheck","label":"What‚Äôs still missing after Sumcheck?","html_id":"whats-still-missing-after-sumcheck","implicit":true,"key":"Vdup9III8U"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"At the end of the previous section the verifier is convinced that","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Rnb27q4fUq"}],"key":"zca5oPJZyz"},{"type":"math","value":"\\text{leaf} = \\sum_{b \\in \\{0,1\\}^3} \\text{f\\_vec}[b] \\cdot \\text{eq}(b, \\alpha)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"tight":"before","html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>leaf</mtext><mo>=</mo><munder><mo>‚àë</mo><mrow><mi>b</mi><mo>‚àà</mo><mo stretchy=\"false\">{</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><msup><mo stretchy=\"false\">}</mo><mn>3</mn></msup></mrow></munder><mtext>f_vec</mtext><mo stretchy=\"false\">[</mo><mi>b</mi><mo stretchy=\"false\">]</mo><mo>‚ãÖ</mo><mtext>eq</mtext><mo stretchy=\"false\">(</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>Œ±</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\text{leaf} = \\sum_{b \\in \\{0,1\\}^3} \\text{f\\_vec}[b] \\cdot \\text{eq}(b, \\alpha)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord text\"><span class=\"mord\">leaf</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.566em;vertical-align:-1.516em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.05em;\"><span style=\"top:-1.809em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span><span class=\"mrel mtight\">‚àà</span><span class=\"mopen mtight\">{</span><span class=\"mord mtight\">0</span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\"><span class=\"mclose mtight\">}</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463em;\"><span style=\"top:-2.786em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">‚àë</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.516em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord text\"><span class=\"mord\">f_vec</span></span><span class=\"mopen\">[</span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚ãÖ</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">eq</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"mclose\">)</span></span></span></span></span>","enumerator":"2","key":"dABDlbfOvu"}],"key":"x6RKVb1Myv"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"‚Ä¶but the verifier has ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"BYO4SzwIYm"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"never seen ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"HstkvdZBVl"},{"type":"inlineCode","value":"f_vec","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"PleLRrvs4L"},{"type":"text","value":" itself","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Of5nBnIZbe"}],"key":"qYKF2XlgKg"},{"type":"text","value":".\nA cheating prover could:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ZPGUy5Wsll"}],"key":"hYQ3iZwcQT"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Run Sumcheck with any ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"S5i3xu05cI"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"fake","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AcjXArF5yD"}],"key":"krZE0bsrkv"},{"type":"text","value":" vector ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"yVz9fU7b8x"},{"type":"inlineCode","value":"f_fake","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"WzQSiD5RMO"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"J8HNVE1xDW"}],"key":"pzisd7jrxD"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Compute ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"E395usbe0X"},{"type":"inlineCode","value":"leaf_fake = Œ£ f_fake[b]¬∑eq(b, Œ±)","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"FP1GIADx5a"},{"type":"text","value":" (easy because Œ± is known).","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ZXzEa5un75"}],"key":"BN8y8AjrKh"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Open that scalar in the last round.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ytb7fjcc0y"}],"key":"edGcWFH2Xq"}],"key":"xbQRuzZp8l"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Sumcheck would verify perfectly ‚Äì yet the statement\n‚Äú","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ygRBQA9DAp"},{"type":"inlineCode","value":"leaf","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"w8SU9FuyiE"},{"type":"text","value":" equals ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"a1PniISU1D"},{"type":"emphasis","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"your","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"qW2P39e09X"}],"key":"G45mwacHjG"},{"type":"text","value":" polynomial at Œ±‚Äù might be ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"FDMmvSxxUX"},{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"false","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"WCcNlpNTxg"}],"key":"z8WKAlRqYP"},{"type":"text","value":".\nWe therefore need a separate mechanism that binds the prover to\na ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ZzfpIt7Tor"},{"type":"emphasis","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"single","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"gtAV0bXsXv"}],"key":"ZjwrwJkQ5t"},{"type":"text","value":" multilinear polynomial before Sumcheck starts.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Fq2C0WBNMK"}],"key":"QCnh5fipuJ"}],"key":"bh3KVg4i7R"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"sage","executable":true,"value":"#  Cheating prover with *same* total sum  S  but different vector\nimport random, math\n\n# Choose a fake vector with the same sum \nS_real = sum(f_vec)                        # 36 for [1‚Ä¶8]\n\nprint(\"Honest vector :\", f_vec)\nn = 3\nX = sp.symbols(f'X0:{n}')                       # (X0, X1, X2)\nf_tilde = sum(coeff * eq_tilde(bits(i, n), X)\n              for i, coeff in enumerate(f_vec))\n\n# 2. Evaluate it at the verifier‚Äôs random challenges\npoly_val = f_tilde.subs({X[0]: alpha0,\n                         X[1]: alpha1,\n                         X[2]: alpha2})\n\nprint(\"Expanded polynomial:\")\nsp.pretty_print(sp.expand(f_tilde))\nprint(\"\\n\")\nf_fake_same_sum = list(reversed(f_vec))    # [8,7,6,5,4,3,2,1]\ndelta = sum(f_fake_same_sum) - S_real      # here 36 - 36 = 0\n\n\n\nassert sum(f_fake_same_sum) == S_real and f_fake_same_sum != f_vec\n\nprint(\"Fake vector   :\", f_fake_same_sum, \"(same sum, different values)\")\n\nfake_tilde = sum(coeff * eq_tilde(bits(i, n), X)\n              for i, coeff in enumerate(f_fake_same_sum))\n\n# Evaluate it at the verifier‚Äôs random challenges\npoly_val = fake_tilde.subs({X[0]: alpha0,\n                         X[1]: alpha1,\n                         X[2]: alpha2})\n\nprint(\"Expanded polynomial:\")\nsp.pretty_print(sp.expand(fake_tilde))\nprint(\"\\n\")\n\n\nprint(\"Total sum S   :\", S_real, \"\\n\")\n\ndef line_triplet(v0, v1):\n    return (v0, v1, v0 + 2*(v1 - v0))\n\ndef sumcheck_transcript(vec, Œ±0, Œ±1):\n    g1_0, g1_1 = sum(vec[:4]), sum(vec[4:])\n    h1 = line_triplet(g1_0, g1_1)\n\n    even, odd = vec[:4], vec[4:]\n    f_fold = [(1-Œ±0)*e + Œ±0*o for e,o in zip(even, odd)]\n\n    g2_0, g2_1 = f_fold[0]+f_fold[1], f_fold[2]+f_fold[3]\n    h2 = line_triplet(g2_0, g2_1)\n\n    even2, odd2 = f_fold[:2], f_fold[2:]\n    f_fold2 = [(1-Œ±1)*e + Œ±1*o for e,o in zip(even2, odd2)]\n\n    g3_0, g3_1 = f_fold2\n    h3 = line_triplet(g3_0, g3_1)\n\n    Œ±2   = random.randint(0, 1)     \n    leaf = eval_line(h3, Œ±2) \n    return h1, h2, h3, Œ±2, leaf\n\ndef eval_line(h, x):\n    return h[0] + (h[1]-h[0])*x\n\ndef verifier_accepts(h1,h2,h3, Œ±0,Œ±1,Œ±2, leaf, S):\n    \"\"\"Return True iff all 4 Sumcheck equalities hold.\"\"\"\n    return (\n        math.isclose(h1[0]+h1[1], S) and\n        math.isclose(h2[0]+h2[1], eval_line(h1, Œ±0)) and\n        math.isclose(h3[0]+h3[1], eval_line(h2, Œ±1)) and\n        math.isclose(leaf,          h3[Œ±2])\n    )\n\nh1_h, h2_h, h3_h, Œ±2_h, leaf_h = sumcheck_transcript(f_vec,  alpha0, alpha1)\nh1_c, h2_c, h3_c, Œ±2_c, leaf_c = sumcheck_transcript(f_fake_same_sum,\n                                                     alpha0, alpha1)\n\nprint(\"Verifier challenges: Œ±0 =\", alpha0, \"Œ±1 =\", alpha1, \"Œ±2 =\", Œ±2_c)\nprint(\"Honest leaf =\", leaf_h, \"   Fake leaf =\", leaf_c, \"\\n\")\n\ndef poly_str(h):\n    \"\"\"Return 'a + b¬∑X' string for a degree-1 poly given (h0,h1, _).\"\"\"\n    a, b = h[0], h[1] - h[0]\n    return f\"{a:.1f}  +  {b:.1f}¬∑X\"\n\ndef run_and_explain(tag, h1,h2,h3, Œ±0,Œ±1,Œ±2, leaf, S):\n    print(f\"\\n===== Verifier run on {tag} transcript =====\")\n    print(\"Prover‚Äôs messages:\")\n    print(\"  h‚ÇÅ values =\", h1, \"  ‚áí  h‚ÇÅ(X) =\", poly_str(h1))\n    print(\"  h‚ÇÇ values =\", h2, \"  ‚áí  h‚ÇÇ(X) =\", poly_str(h2))\n    print(\"  h‚ÇÉ values =\", h3, \"  ‚áí  h‚ÇÉ(X) =\", poly_str(h3))\n    print(\"  leaf =\", leaf, \"\\n\")\n\n    # --- algebraic checks ----------------------------------\n    check1 = math.isclose(h1[0] + h1[1], S)\n    check2 = math.isclose(h2[0] + h2[1], eval_line(h1, Œ±0))\n    check3 = math.isclose(h3[0] + h3[1], eval_line(h2, Œ±1))\n    check4 = math.isclose(leaf        , h3[Œ±2])\n\n    print(f\"‚ë†  h‚ÇÅ(0)+h‚ÇÅ(1) = {h1[0]+h1[1]:>8}    vs  S = {S:<8}        ‚Üí {check1}\")\n    print(f\"‚ë°  h‚ÇÇ(0)+h‚ÇÇ(1) = {h2[0]+h2[1]:>8}    vs  h‚ÇÅ(Œ±‚ÇÄ) = {eval_line(h1,Œ±0):<8}  ‚Üí {check2}\")\n    print(f\"‚ë¢  h‚ÇÉ(0)+h‚ÇÉ(1) = {h3[0]+h3[1]:>8}    vs  h‚ÇÇ(Œ±‚ÇÅ) = {eval_line(h2,Œ±1):<8}  ‚Üí {check3}\")\n    print(f\"‚ë£  leaf        = {leaf:>8}    vs  h‚ÇÉ(Œ±‚ÇÇ) = {h3[Œ±2]:<8}       ‚Üí {check4}\")\n\n    all_pass = check1 and check2 and check3 and check4\n    print(\"Result:\", \"‚úî PASSED\" if all_pass else \"‚úñ REJECTED\")\n    return all_pass\n\nok_honest = run_and_explain(\"HONEST\",\n                            h1_h,h2_h,h3_h,\n                            alpha0,alpha1,Œ±2_h,\n                            leaf_h, S_real)\n\nok_fake   = run_and_explain(\"FAKE  \",\n                            h1_c,h2_c,h3_c,\n                            alpha0,alpha1,Œ±2_c,\n                            leaf_c, S_real)   \nprint(\"Verifier result on HONEST transcript :\", ok_honest)\nprint(\"Verifier result on FAKE   transcript :\", ok_fake, \"\\n\")\n\ndef eval_mle(evals, u):\n    return sum(e*eq_tilde(bits_of(i,3), u) for i,e in enumerate(evals))\n\nu_test = (0,0,0)\nprint(f\"At point u = {u_test}:\")\nprint(\"  honest fÃÉ(u) =\", eval_mle(f_vec, u_test))\nprint(\"  fake   fÃÉ(u) =\", eval_mle(f_fake_same_sum, u_test),\n      \"‚Üê different but still passed Sumcheck!\")\n","key":"B18sHZv8Xx"},{"type":"output","id":"ia4TMTQGUt-I33vr02eJH","data":[{"name":"stdout","output_type":"stream","text":"Honest vector : [1, 2, 3, 4, 5, 6, 7, 8]\nExpanded polynomial:\n4‚ãÖX‚ÇÄ + 2‚ãÖX‚ÇÅ + X‚ÇÇ + 1\n\n\nFake vector   : [8, 7, 6, 5, 4, 3, 2, 1] (same sum, different values)\nExpanded polynomial:\n-4‚ãÖX‚ÇÄ - 2‚ãÖX‚ÇÅ - X‚ÇÇ + 8\n\n\nTotal sum S   : 36 \n\nVerifier challenges: Œ±0 = 8 Œ±1 = 2 Œ±2 = 0\nHonest leaf = 38    Fake leaf = -28 \n\n\n===== Verifier run on HONEST transcript =====\nProver‚Äôs messages:\n  h‚ÇÅ values = (10, 26, 42)   ‚áí  h‚ÇÅ(X) = 10.0  +  16.0¬∑X\n  h‚ÇÇ values = (67, 71, 75)   ‚áí  h‚ÇÇ(X) = 67.0  +  4.0¬∑X\n  h‚ÇÉ values = (37, 38, 39)   ‚áí  h‚ÇÉ(X) = 37.0  +  1.0¬∑X\n  leaf = 38 \n\n‚ë†  h‚ÇÅ(0)+h‚ÇÅ(1) =       36    vs  S = 36              ‚Üí True\n‚ë°  h‚ÇÇ(0)+h‚ÇÇ(1) =      138    vs  h‚ÇÅ(Œ±‚ÇÄ) = 138       ‚Üí True\n‚ë¢  h‚ÇÉ(0)+h‚ÇÉ(1) =       75    vs  h‚ÇÇ(Œ±‚ÇÅ) = 75        ‚Üí True\n‚ë£  leaf        =       38    vs  h‚ÇÉ(Œ±‚ÇÇ) = 38             ‚Üí True\nResult: ‚úî PASSED\n\n===== Verifier run on FAKE   transcript =====\nProver‚Äôs messages:\n  h‚ÇÅ values = (26, 10, -6)   ‚áí  h‚ÇÅ(X) = 26.0  +  -16.0¬∑X\n  h‚ÇÇ values = (-49, -53, -57)   ‚áí  h‚ÇÇ(X) = -49.0  +  -4.0¬∑X\n  h‚ÇÉ values = (-28, -29, -30)   ‚áí  h‚ÇÉ(X) = -28.0  +  -1.0¬∑X\n  leaf = -28 \n\n‚ë†  h‚ÇÅ(0)+h‚ÇÅ(1) =       36    vs  S = 36              ‚Üí True\n‚ë°  h‚ÇÇ(0)+h‚ÇÇ(1) =     -102    vs  h‚ÇÅ(Œ±‚ÇÄ) = -102      ‚Üí True\n‚ë¢  h‚ÇÉ(0)+h‚ÇÉ(1) =      -57    vs  h‚ÇÇ(Œ±‚ÇÅ) = -57       ‚Üí True\n‚ë£  leaf        =      -28    vs  h‚ÇÉ(Œ±‚ÇÇ) = -28            ‚Üí True\nResult: ‚úî PASSED\nVerifier result on HONEST transcript : True\nVerifier result on FAKE   transcript : True \n\nAt point u = (0, 0, 0):\n  honest fÃÉ(u) = 1\n  fake   fÃÉ(u) = 8 ‚Üê different but still passed Sumcheck!\n"}],"key":"d0b96jXkdw"}],"key":"jLQF1UiYNb"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Why add a (mock) PCS?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BuLh3Rexm4"}],"identifier":"why-add-a-mock-pcs","label":"Why add a (mock) PCS?","html_id":"why-add-a-mock-pcs","implicit":true,"key":"ZNvqjVlpya"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Problem:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QY9zNrekzh"}],"key":"yaPBTElxyJ"},{"type":"text","value":" Sumcheck only checks algebra; the verifier never sees the","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QqQQkLJHRu"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IUGLdPnf0N"},{"type":"text","value":"evaluation vector ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uUX48hAYz7"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"f","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"R0vhUf80F8"}],"key":"F9BYKsAtol"},{"type":"text","value":". A prover can swap in a different vector","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bFKHUq27Aw"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qJpyF4ndQQ"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"f_fake","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kWa5a6CUwB"}],"key":"bJLiO7ohT3"},{"type":"text","value":" after learning the challenges and still pass all four checks.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"K1zdFlOz1t"}],"key":"OoB6wIAYwm"}],"key":"rA3EIO9So6"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"PCS idea:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"DTBhGjMYFK"}],"key":"vkEfqAYnXJ"},{"type":"text","value":" Prover first sends a digest ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"qUL0KQH2jd"},{"type":"inlineCode","value":"C = Hash(f)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"LDuaYLzaGi"},{"type":"text","value":".","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Ed6KWc3TAM"},{"type":"break","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"gME64Ips2d"},{"type":"text","value":"After Sumcheck it must open ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"yR9EyLfFrS"},{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"the same","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"F3PBQFWmoH"}],"key":"mVXhnAMe7p"},{"type":"text","value":" digest together with the claimed\nvalue ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"wnqWXuZVDL"},{"type":"inlineCode","value":"f(Œ±‚ÇÄ,Œ±‚ÇÅ,Œ±‚ÇÇ)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"WPHSNIQM4S"},{"type":"text","value":".","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"YCxo2I763E"}],"key":"XcpckVd1Eo"}],"key":"sOA6fwBJkn"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Security:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"uRqM7Bt8iz"}],"key":"XdysmY4S64"}],"key":"eSWultsvh8"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Honest ‚Üí digest matches ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"mv7VykUmts"},{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"and","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"AAPW9LT3KG"}],"key":"bsyiUCTyWx"},{"type":"text","value":" value matches ‚Üí verifier accepts.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"nwTdXLVTDk"}],"key":"Jndnlci3pN"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Cheater ‚Üí digest mismatch (or wrong value) ‚Üí verifier rejects.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"isqBpDaTpo"}],"key":"mecG5LhzYy"}],"key":"Lp28GD8XzI"}],"key":"RtXOzsL5nz"}],"key":"B1BGvkAwa0"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"The tiny SHA-256 PCS below demonstrates this:","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"CutdCf1Tk8"},{"type":"break","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"bi3Rq6fJG1"},{"type":"inlineCode","value":"pcs_open","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"XfXnL3VQ5I"},{"type":"text","value":" prints ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"KTuTwELxfD"},{"type":"emphasis","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"why","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"VqeY9BT4cn"}],"key":"sx1Ub34jhn"},{"type":"text","value":" it succeeds on the honest vector and fails on the\nfake one.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"iCbWJcIFbb"}],"key":"UdL3nCjLfp"}],"key":"dZ10RElUjm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"sage","executable":true,"value":"\nimport hashlib, json, math\n\ndef _canonical(evals):\n    return [int(x) for x in evals]\n\ndef pcs_commit(evals):\n    blob = json.dumps(_canonical(evals), separators=(\",\", \":\")).encode()\n    return hashlib.sha256(blob).hexdigest()\n\ndef pcs_open(evals, point, claimed_val, commitment, *, verbose=True):\n    \"\"\"\n    Return (all_ok, digest_ok, value_ok)\n    ‚Ä¢ If verbose=True, print a one-line explanation whenever something fails.\n    \"\"\"\n    digest_ok = (pcs_commit(evals) == commitment)\n    if verbose and not digest_ok:\n        print(\"[PCS] digest mismatch \"\n              f\"(got {commitment[:12]}‚Ä¶, expected {pcs_commit(evals)[:12]}‚Ä¶ )\")\n\n    poly_val = sum(int(e) * eq_tilde(bits_of(i, 3), point)\n                   for i, e in enumerate(evals))\n    value_ok = math.isclose(poly_val, claimed_val)\n    if verbose and digest_ok and not value_ok:\n        print(\"[PCS] value mismatch \"\n              f\"(claimed {claimed_val}, recomputed {poly_val})\")\n\n    if verbose and digest_ok and value_ok:\n        print(\"[PCS] ‚úî digest & value both correct\")\n\n    return digest_ok and value_ok, digest_ok, value_ok\n\nprint(\" Honest evaluation vector  :\", f_vec)\nprint(\" Fake   evaluation vector  :\", f_fake_same_sum, \"(same Œ£, different order)\\n\")\n\ncommit_honest = pcs_commit(f_vec)\ncommit_fake   = pcs_commit(f_fake_same_sum)\nprint(\"Honest commitment digest :\", commit_honest)\nprint(\"Fake   commitment digest :\", commit_fake)\nprint(\"   Digests equal ? \", commit_honest == commit_fake, \"\\n\")\n\nquery_pt = (alpha0, alpha1, Œ±2_h)               \nleaf_h   = eval_mle(f_vec , query_pt)          \nleaf_f   = eval_mle(f_fake_same_sum, query_pt)        \n\n\nok_honest, dig_honest, val_honest = pcs_open(f_vec , query_pt, leaf_h, commit_honest)\nok_fake  , dig_fake , val_fake  = pcs_open(f_fake_same_sum, query_pt, leaf_f, commit_honest)\n\nprint(\"PCS-open on HONEST data :\", ok_honest)\nprint(\"PCS-open on FAKE  data  :\", ok_fake, \"\\n\",\n      \"‚Üê fails (digest mismatch)\")","key":"jxKX5BRE2y"},{"type":"output","id":"PjWehuQxNg8hrXKv1j3fM","data":[{"name":"stdout","output_type":"stream","text":" Honest evaluation vector  : [1, 2, 3, 4, 5, 6, 7, 8]\n Fake   evaluation vector  : [8, 7, 6, 5, 4, 3, 2, 1] (same Œ£, different order)\n\nHonest commitment digest : b2ddd6543011e658aaebc223b42021e89fa9a18bd1f2207f6cb68e73ca5688b3\nFake   commitment digest : 97c729b9b6163a0473bfc1d90d5bd4d8f03013dfaf2531be15f58065afe80e3f\n   Digests equal ?  False \n\n[PCS] ‚úî digest & value both correct\n[PCS] digest mismatch (got b2ddd6543011‚Ä¶, expected 97c729b9b616‚Ä¶ )\nPCS-open on HONEST data : True\nPCS-open on FAKE  data  : False \n ‚Üê fails (digest mismatch)\n"}],"key":"t3eb9R7Ncc"}],"key":"VMZkI2UVAd"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Fact 1 ‚Äî ‚ÄúEvaluation = Sum‚Äù","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"o9AsWvX4U2"}],"identifier":"fact-1-evaluation-sum","label":"Fact 1 ‚Äî ‚ÄúEvaluation = Sum‚Äù","html_id":"fact-1-evaluation-sum","implicit":true,"key":"EgiFI64LJl"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"For a multilinear-extension polynomial written in evaluation form:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eGgv2qiaIl"}],"key":"ZHc2b8LpQY"},{"type":"math","value":"\\tilde{f}(\\mathbf{X}) = \\sum_{i \\in {0,1}^n} a_i,E_i(\\mathbf{X}), \\quad\nE_i(\\mathbf{X}) = \\prod_{j=0}^{n-1}\n\\left( \\mathrm{bits}(i)_j,X_j + (1 - \\mathrm{bits}(i)_j)(1 - X_j) \\right)","position":{"start":{"line":5,"column":1},"end":{"line":9,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mover accent=\"true\"><mi>f</mi><mo>~</mo></mover><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">X</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munder><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><msup><mrow><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn></mrow><mi>n</mi></msup></mrow></munder><msub><mi>a</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi>E</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">X</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mspace width=\"1em\"/><msub><mi>E</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">X</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munderover><mo>‚àè</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>‚àí</mo><mn>1</mn></mrow></munderover><mrow><mo fence=\"true\">(</mo><mrow><mi mathvariant=\"normal\">b</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">s</mi></mrow><mo stretchy=\"false\">(</mo><mi>i</mi><msub><mo stretchy=\"false\">)</mo><mi>j</mi></msub><mo separator=\"true\">,</mo><msub><mi>X</mi><mi>j</mi></msub><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>‚àí</mo><mrow><mi mathvariant=\"normal\">b</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">s</mi></mrow><mo stretchy=\"false\">(</mo><mi>i</mi><msub><mo stretchy=\"false\">)</mo><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>‚àí</mo><msub><mi>X</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">\\tilde{f}(\\mathbf{X}) = \\sum_{i \\in {0,1}^n} a_i,E_i(\\mathbf{X}), \\quad\nE_i(\\mathbf{X}) = \\prod_{j=0}^{n-1}\n\\left( \\mathrm{bits}(i)_j,X_j + (1 - \\mathrm{bits}(i)_j)(1 - X_j) \\right)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1813em;vertical-align:-0.25em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9313em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span><span style=\"top:-3.6134em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.0833em;\"><span class=\"mord\">~</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathbf\">X</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.4638em;vertical-align:-1.4138em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.05em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">‚àà</span><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\">1</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5991em;\"><span style=\"top:-2.7916em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">‚àë</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4138em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathbf\">X</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathbf\">X</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.2149em;vertical-align:-1.4138em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8011em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">‚àè</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">‚àí</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4138em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span class=\"mord mathrm\">bits</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚àí</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">bits</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚àí</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span></span></span></span></span>","enumerator":"3","key":"AaxWnExc4b"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"a single point-evaluation can be rewritten as an inner product:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"obKmAka2xg"}],"key":"qlZ5bsNqXE"},{"type":"math","value":"\\boxed{\n\\tilde{f}(\\mathbf{u}) = \\sum_{i \\in {0,1}^n} a_i,\\underbrace{E_i(\\mathbf{u})}{=,eq(\\mathbf{u}, i)}\n= \\left\\langle\n\\underbrace{(a_0, \\dots, a{2^n - 1})}{f{\\text{vec}}},\n\\underbrace{(eq(\\mathbf{u}, 0), \\dots, eq(\\mathbf{u}, 2^n - 1))}{w{\\text{vec}}}\n\\right\\rangle\n}","position":{"start":{"line":13,"column":1},"end":{"line":21,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><menclose notation=\"box\"><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mover accent=\"true\"><mi>f</mi><mo>~</mo></mover><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">u</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munder><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><msup><mrow><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn></mrow><mi>n</mi></msup></mrow></munder><msub><mi>a</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><munder><mrow><msub><mi>E</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">u</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"true\">‚èü</mo></munder><mrow><mo>=</mo><mo separator=\"true\">,</mo><mi>e</mi><mi>q</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">u</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><mo>=</mo><mrow><mo fence=\"true\">‚ü®</mo><munder><mrow><mo stretchy=\"false\">(</mo><msub><mi>a</mi><mn>0</mn></msub><mo separator=\"true\">,</mo><mo>‚Ä¶</mo><mo separator=\"true\">,</mo><mi>a</mi><mrow><msup><mn>2</mn><mi>n</mi></msup><mo>‚àí</mo><mn>1</mn></mrow><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"true\">‚èü</mo></munder><mrow><mi>f</mi><mtext>vec</mtext></mrow><mo separator=\"true\">,</mo><munder><mrow><mo stretchy=\"false\">(</mo><mi>e</mi><mi>q</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">u</mi><mo separator=\"true\">,</mo><mn>0</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo>‚Ä¶</mo><mo separator=\"true\">,</mo><mi>e</mi><mi>q</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">u</mi><mo separator=\"true\">,</mo><msup><mn>2</mn><mi>n</mi></msup><mo>‚àí</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"true\">‚èü</mo></munder><mrow><mi>w</mi><mtext>vec</mtext></mrow><mo fence=\"true\">‚ü©</mo></mrow></mrow></mstyle></mstyle></mstyle></menclose></mrow><annotation encoding=\"application/x-tex\">\\boxed{\n\\tilde{f}(\\mathbf{u}) = \\sum_{i \\in {0,1}^n} a_i,\\underbrace{E_i(\\mathbf{u})}{=,eq(\\mathbf{u}, i)}\n= \\left\\langle\n\\underbrace{(a_0, \\dots, a{2^n - 1})}{f{\\text{vec}}},\n\\underbrace{(eq(\\mathbf{u}, 0), \\dots, eq(\\mathbf{u}, 2^n - 1))}{w{\\text{vec}}}\n\\right\\rangle\n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:3.5438em;vertical-align:-1.7538em;\"></span><span class=\"mord\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.79em;\"><span style=\"top:-5.5438em;\"><span class=\"pstrut\" style=\"height:5.5438em;\"></span><span class=\"boxpad\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9313em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span><span style=\"top:-3.6134em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.0833em;\"><span class=\"mord\">~</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathbf\">u</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.05em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">‚àà</span><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\">1</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5991em;\"><span style=\"top:-2.7916em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">‚àë</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4138em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span class=\"svg-align\" style=\"top:-2.102em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathbf\">u</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.898em;\"><span></span></span></span></span></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mopen\">(</span><span class=\"mord mathbf\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">‚ü®</span></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span class=\"svg-align\" style=\"top:-2.102em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">‚Ä¶</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7144em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚àí</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">1</span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.898em;\"><span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">vec</span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span class=\"svg-align\" style=\"top:-2.102em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mopen\">(</span><span class=\"mord mathbf\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">‚Ä¶</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mopen\">(</span><span class=\"mord mathbf\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7144em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚àí</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">))</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.898em;\"><span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">vec</span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">‚ü©</span></span></span></span></span></span></span><span style=\"top:-3.79em;\"><span class=\"pstrut\" style=\"height:5.5438em;\"></span><span class=\"stretchy fbox\" style=\"height:3.5438em;border-style:solid;border-width:0.04em;\"></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.7538em;\"><span></span></span></span></span></span></span></span></span></span>","enumerator":"4","key":"Dh12FgDf7k"},{"type":"code","lang":"","value":"‚Ä¢\tLeft-hand side ‚Äî the usual ‚Äúplug-and-chug‚Äù evaluation.\n‚Ä¢\tRight-hand side ‚Äî a length-$2^n$ sum, exactly the form the Sumcheck protocol can certify.","position":{"start":{"line":22,"column":1},"end":{"line":23,"column":1}},"key":"uHGfBHvMn9"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"‚∏ª","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"mcVVIdY30Q"}],"key":"WZKXDPzeIo"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"In the notebook below we will:","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"mWJYEKrYGW"}],"key":"cYlGyL1wUd"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":28,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"build the equality-function vector ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"M9XRp7RIJu"},{"type":"inlineMath","value":"w_{\\text{vec}}","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>w</mi><mtext>vec</mtext></msub></mrow><annotation encoding=\"application/x-tex\">w_{\\text{vec}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">vec</span></span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"lSPfZIwZYY"},{"type":"text","value":" for the verifier‚Äôs random point ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"MJXi45PnsO"},{"type":"inlineMath","value":"\\mathbf{u} = (\\alpha_0, \\alpha_1, \\alpha_2)","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">u</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>Œ±</mi><mn>0</mn></msub><mo separator=\"true\">,</mo><msub><mi>Œ±</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>Œ±</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathbf{u} = (\\alpha_0, \\alpha_1, \\alpha_2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4444em;\"></span><span class=\"mord mathbf\">u</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>","key":"QScE2h4Lu6"},{"type":"text","value":";","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"BkUDiS9uIN"}],"key":"y55EXnja29"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"compute the inner product ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"wScX2KB8jU"},{"type":"inlineMath","value":"\\langle f_{\\text{vec}}, w_{\\text{vec}} \\rangle","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">‚ü®</mo><msub><mi>f</mi><mtext>vec</mtext></msub><mo separator=\"true\">,</mo><msub><mi>w</mi><mtext>vec</mtext></msub><mo stretchy=\"false\">‚ü©</mo></mrow><annotation encoding=\"application/x-tex\">\\langle f_{\\text{vec}}, w_{\\text{vec}} \\rangle</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">‚ü®</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">vec</span></span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">vec</span></span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">‚ü©</span></span></span></span>","key":"Y43VK189jo"},{"type":"text","value":";","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"HqNXAviIRu"}],"key":"qazZ9hD00q"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"show it equals the direct polynomial value computed earlier.","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"d5cjtdU7fo"}],"key":"q5l0CoJeXR"}],"key":"ZJAlqhmXAI"},{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"That makes the algebraic bridge between an MLE evaluation and a Sumcheck sum concrete.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"abvTlFMLb9"}],"key":"cdN9GCwrK3"}],"key":"QblJQ0Ujdz"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"sage","executable":true,"value":"# Fact 1 : a single evaluation is an inner product \nu_point = (alpha0, alpha1, alpha2)                     \n\ntry:\n    _ = poly_honest      \nexcept NameError:\n    poly_honest = sp.expand(sum(\n        int(f) * eq_tilde(bits_of(i, 3), X)     \n        for i, f in enumerate(f_vec)\n    ))\n\nprint(\"\\nFull multilinear extension  fÃÉ(X‚ÇÄ,X‚ÇÅ,X‚ÇÇ):\")\nsp.pretty_print(poly_honest)\n\n\n# Build equality-function vector  w  (length 8)\nw_vec = [eq_tilde(bits_of(i, 3), u_point) for i in range(8)]\n\n\nprint(\"Verifier‚Äôs point  u =\", u_point, \"\\n\")\nprint(\" i   bits       f_vec[i]      w[i]   contribution  f[i]¬∑w[i]\")\nprint(\"‚îÄ‚îÄ‚îÄ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\")\n\ncontribs = []\nfor i, (f, w) in enumerate(zip(f_vec, w_vec)):\n    c = f * w\n    contribs.append(c)\n    print(f\"{i:2}   {bits_of(i,3)}     {f:>2}        {w:>5}        {c:>6}\")\n\ninner_prod = sum(contribs)\npoly_val   = eval_mle(f_vec, u_point)                  # direct evaluation\n\nprint(\"\\nŒ£ contributions =\", inner_prod)\nprint(\"Direct polynomial value fÃÉ(u) =\", poly_val)\n\nassert inner_prod == poly_val\nprint(\"\\n‚úî  fÃÉ(u) equals the length-8 inner product ‚ü®f_vec , w_vec‚ü©.\")\n","key":"WgDifCuhS8"},{"type":"output","id":"rEgEIi8LIRzkecmaSt79Y","data":[{"name":"stdout","output_type":"stream","text":"\nFull multilinear extension  fÃÉ(X‚ÇÄ,X‚ÇÅ,X‚ÇÇ):\nX‚ÇÄ + 2‚ãÖX‚ÇÅ + 4‚ãÖX‚ÇÇ + 1\nVerifier‚Äôs point  u = (8, 2, 1) \n\n i   bits       f_vec[i]      w[i]   contribution  f[i]¬∑w[i]\n‚îÄ‚îÄ‚îÄ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n 0   (0, 0, 0)      1            0             0\n 1   (1, 0, 0)      2            0             0\n 2   (0, 1, 0)      3            0             0\n 3   (1, 1, 0)      4            0             0\n 4   (0, 0, 1)      5            7            35\n 5   (1, 0, 1)      6           -8           -48\n 6   (0, 1, 1)      7          -14           -98\n 7   (1, 1, 1)      8           16           128\n\nŒ£ contributions = 17\nDirect polynomial value fÃÉ(u) = 17\n\n‚úî  fÃÉ(u) equals the length-8 inner product ‚ü®f_vec , w_vec‚ü©.\n"}],"key":"K4xYglKkak"}],"key":"kdYhNGKbQX"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Fact #2 ‚Äî Sumcheck fold ‚âô FRI split-fold","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DLGTn8ZbeJ"}],"identifier":"fact-2-sumcheck-fold-fri-split-fold","label":"Fact #2 ‚Äî Sumcheck fold ‚âô FRI split-fold","html_id":"fact-2-sumcheck-fold-fri-split-fold","implicit":true,"key":"kevEMf9TtL"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"At every round both protocols take a length-","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cccgyt1QNd"},{"type":"inlineMath","value":"2m","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">2m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">m</span></span></span></span>","key":"LXY94Gl0Sv"},{"type":"text","value":" vector, cut it into","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"A2bQgxacor"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xyyr5SzwsQ"},{"type":"inlineCode","value":"even","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CXDDupnVQ0"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MYYojwDyyq"},{"type":"inlineCode","value":"odd","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jDSpGVNTOz"},{"type":"text","value":" halves, and compute:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OZsNexR2Om"}],"key":"XaEIGnBbej"},{"type":"math","value":"\\texttt{fold}(\\alpha) = (1 - \\alpha)\\,\\texttt{even} + \\alpha\\,\\texttt{odd}","position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext mathvariant=\"monospace\">fold</mtext><mo stretchy=\"false\">(</mo><mi>Œ±</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>‚àí</mo><mi>Œ±</mi><mo stretchy=\"false\">)</mo><mtext>‚Äâ</mtext><mtext mathvariant=\"monospace\">even</mtext><mo>+</mo><mi>Œ±</mi><mtext>‚Äâ</mtext><mtext mathvariant=\"monospace\">odd</mtext></mrow><annotation encoding=\"application/x-tex\">\\texttt{fold}(\\alpha) = (1 - \\alpha)\\,\\texttt{even} + \\alpha\\,\\texttt{odd}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord texttt\">fold</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚àí</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord text\"><span class=\"mord texttt\">even</span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6111em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord text\"><span class=\"mord texttt\">odd</span></span></span></span></span></span>","enumerator":"5","key":"yuPfBfxbl5"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Sumcheck","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"FnDi153cfj"}],"key":"mSiggFuthx"},{"type":"text","value":" uses it to reduce the multilinear inner-product dimension.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"PBrpDu3IYI"}],"key":"xtEllNboyx"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"FRI","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"JYyvI8lHJL"}],"key":"FS3PMHmRNp"},{"type":"text","value":" uses the ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"OOjdik1ahy"},{"type":"emphasis","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"same","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"j0IrOxW45Y"}],"key":"Rf6kKMQV7S"},{"type":"text","value":" map to reduce a Reed‚ÄìSolomon codeword.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"LbqNyyf8JC"}],"key":"Irf0MCuaUc"}],"key":"y9TK0CzmdD"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Below we fold the honest evaluation vector two ways:","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"Rbm5i1CBwe"}],"key":"peIU2qbNam"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"with the hand-written Sumcheck comprehension already in the notebook,","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"QoA4FgtAh6"}],"key":"RyE0MdhgD6"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"use folding code from ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"gPMXDzsvVi"},{"type":"inlineCode","value":"basefold_rs_pcs.py","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"niA53KCp0h"},{"type":"text","value":", the helper the real","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"UCNYjjJSEa"},{"type":"break","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"EIrQYs34Um"},{"type":"text","value":"FRI implementation calls.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"ty621gvHFm"}],"key":"ovrGtwlZxY"}],"key":"egy1jLH3Bo"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"They land on exactly the same 4-entry vector, confirming the equivalence.","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"hUKGkGYrwV"}],"key":"sKKlgsoqKD"}],"key":"GjTmdWK9rt"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"sage","executable":true,"value":"\n\n'''\nThe actual folding from the implementation itself : \n\n            # fold f_code\n            f_code_folded = [(Field(1)-alpha) * (f_code[2*j] + f_code[2*j+1]) / 2 \n                      + alpha * (f_code[2*j] - f_code[2*j+1]) / (2 * coset * twiddles[j]) \n                      for j in range(len(f_code)//2)]\n'''\n\ndef fri_split_fold(even, odd, alpha):\n    \"\"\"\n    Return (1-alpha)*even + alpha*odd   element-wise, exactly what FRI\n    does to halve a Reed‚ÄìSolomon codeword.  Works for plain lists of\n    field elements as used in this demo.\n    \"\"\"\n    return [(1 - alpha) * e + alpha * o for e, o in zip(even, odd)]\n\n\neven = f_vec[:4]          # indices 000,001,010,011  (X‚ÇÄ=0)\nodd  = f_vec[4:]          # indices 100,101,110,111  (X‚ÇÄ=1)\nŒ±    = alpha0             # verifier‚Äôs first challenge\n\nprint(\"even =\", even)\nprint(\"odd  =\", odd)\nprint(\"Œ± =\", Œ±, \"\\n\")\n\n# Sumcheck‚Äôs explicit comprehension\nsumcheck_fold = [(1-Œ±)*e + Œ±*o for e, o in zip(even, odd)]\nprint(\"Sumcheck fold :\", sumcheck_fold)\n\n# FRI‚Äôs comprehension\npcs = BASEFOLD_RS_PCS(MerkleTree, debug=0)\nfri_fold = fri_split_fold(even, odd, Œ±)  \nprint(\"FRI      fold :\", fri_fold, \"\\n\")\n\nassert sumcheck_fold == fri_fold\nprint(\"‚úî  Identical output ‚áí both protocols share the very same linear map.\")\n","key":"TAz69gQdjX"},{"type":"output","id":"meTID77cIizoB2a_YEHom","data":[{"name":"stdout","output_type":"stream","text":"even = [1, 2, 3, 4]\nodd  = [5, 6, 7, 8]\nŒ± = 8 \n\nSumcheck fold : [33, 34, 35, 36]\nFRI      fold : [33, 34, 35, 36] \n\n‚úî  Identical output ‚áí both protocols share the very same linear map.\n"}],"key":"olTcV9HYVj"}],"key":"YiAbVvjIZx"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 4 ‚Äî Gluing FRI + Sumcheck into ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FZmmYqIV7i"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"one","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PRZ5ZsYpdW"}],"key":"SsQeKadH6w"},{"type":"text","value":" PCS","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qg4csG5Ppo"}],"identifier":"step-4-gluing-fri-sumcheck-into-one-pcs","label":"Step 4 ‚Äî Gluing FRI + Sumcheck into one PCS","html_id":"step-4-gluing-fri-sumcheck-into-one-pcs","implicit":true,"key":"fvg15Dj5Yj"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Goal:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uLm35bhDh3"}],"key":"gkZYQmjMwo"},{"type":"text","value":" prove the public statement ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wSv3bkkOYR"},{"type":"inlineMath","value":"f(u) = v","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">f(u) = v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span>","key":"OmAAmPEsF9"},{"type":"text","value":" without revealing the","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NEjG08da1h"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"i6Wm7dxffl"},{"type":"text","value":"whole evaluation vector.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"snEtUMG0Bt"}],"key":"lnAnqUfWNK"},{"type":"thematicBreak","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"dyvDucfEbu"},{"type":"heading","depth":2,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"1 ¬∑ Re-phrase the claim","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"HiTWnYgHzy"}],"identifier":"id-1-re-phrase-the-claim","label":"1 ¬∑ Re-phrase the claim","html_id":"id-1-re-phrase-the-claim","implicit":true,"key":"Nwf1q5VGeI"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Pick the ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"vGPr0PPPXG"},{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"same","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"TYnHZNfoe2"}],"key":"GxFLIwAkGZ"},{"type":"text","value":" random challenges","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Euk4wCACvH"},{"type":"break","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"EpZyhbEu9q"},{"type":"inlineMath","value":"\\alpha = (\\alpha_0, \\dots, \\alpha_{n-1})","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œ±</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>Œ±</mi><mn>0</mn></msub><mo separator=\"true\">,</mo><mo>‚Ä¶</mo><mo separator=\"true\">,</mo><msub><mi>Œ±</mi><mrow><mi>n</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\alpha = (\\alpha_0, \\dots, \\alpha_{n-1})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">‚Ä¶</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">‚àí</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>","key":"lquvxnFO6z"},{"type":"text","value":" that will drive both","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"J3QdjeyNJM"},{"type":"break","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"vy7X8hKpgD"},{"type":"text","value":"sub-protocols.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"DZbsHSdVIo"}],"key":"R14XIGFBlC"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Let ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"ewc2rrLnng"},{"type":"inlineMath","value":"w := f(\\alpha)","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo>:</mo><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>Œ±</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">w := f(\\alpha)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"mclose\">)</span></span></span></span>","key":"WysUTFHXUo"},{"type":"text","value":".","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"YZEl4NB7KP"}],"key":"oJW3gRPTM2"}],"key":"JQY0jJmRh8"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Now proving ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"CNgWkcXxh8"},{"type":"inlineMath","value":"f(u) = v","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">f(u) = v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span>","key":"bPqwfVtlRO"},{"type":"text","value":" is equivalent to proving these two facts:","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"c3NZA4GBpp"}],"key":"g7RhmNZLFf"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":17,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"strong","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"FRI-fact","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"yW5jGTq0YS"}],"key":"fjzq9xYFrZ"},{"type":"text","value":"‚ÄÉ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"qS4ZZFfk6r"},{"type":"inlineMath","value":"f(\\alpha) = w","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>Œ±</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">f(\\alpha) = w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span>","key":"IFSgn2kJb3"}],"key":"oeRY4TAYPE"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"strong","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Sumcheck-fact","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"bpwSDfo9Z8"}],"key":"Xau53W8ZPU"},{"type":"text","value":"‚ÄÉ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"LJmfwJWGld"},{"type":"inlineMath","value":"v = \\sum_b f(b) \\, eq(u, b)","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mo>=</mo><msub><mo>‚àë</mo><mi>b</mi></msub><mi>f</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mtext>‚Äâ</mtext><mi>e</mi><mi>q</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">v = \\sum_b f(b) \\, eq(u, b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0497em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">‚àë</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1864em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span>","key":"jWXfyebYOD"}],"key":"ZbWvIb3asf"}],"key":"YgT5ozDjht"},{"type":"thematicBreak","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"JlBHGP9xeN"},{"type":"heading","depth":2,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"2 ¬∑ One transcript, two jobs","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"E3pLu2GrLQ"}],"identifier":"id-2-one-transcript-two-jobs","label":"2 ¬∑ One transcript, two jobs","html_id":"id-2-one-transcript-two-jobs","implicit":true,"key":"PPXoi01TJj"},{"type":"table","position":{"start":{"line":24,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"round","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"lV8aTdTPuP"}],"key":"ISc0IhX1Q5"},{"type":"tableCell","header":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"prover message","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"AESbjoXmN2"}],"key":"pqo8zV3gGP"},{"type":"tableCell","header":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Œ± used by","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"ktmDz9LnZU"}],"key":"Q6XjngLt0B"}],"key":"OHL4Vsr42U"},{"type":"tableRow","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"commit","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"cY4EVpoRZa"}],"key":"maQQqOb4wD"},{"type":"tableCell","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"RS‚Äìcodeword ‚Üí Merkle root ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"OX3dwqKw9O"},{"type":"inlineMath","value":"C_0","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>C</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">C_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"xqDjEmmkY5"}],"key":"rg9hT7xlEG"},{"type":"tableCell","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"‚Äî","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"RGmSuxWB88"}],"key":"ssChZv4yhG"}],"key":"WKqpt3OGQo"},{"type":"tableRow","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"0","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"sPQF5PrhWq"}],"key":"J5gKYjk3c3"},{"type":"tableCell","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"send ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"lgHgC420lb"},{"type":"inlineMath","value":"h_1","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>h</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">h_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">h</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"sGjmSVzBZg"},{"type":"text","value":", fold with ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"zz0kXSl5Td"},{"type":"inlineMath","value":"\\alpha_0","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Œ±</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\alpha_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"qEqXiG3fjP"}],"key":"x5LRDZi5xp"},{"type":"tableCell","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"FRI & Sumcheck","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"Ks6h0GdXxA"}],"key":"Mfyl4qZcEF"}],"key":"Oozmjx0PHM"},{"type":"tableRow","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"1","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"l5Zm1XX2Pt"}],"key":"qwtTbnjfnJ"},{"type":"tableCell","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"send ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"xnFxvpod1Y"},{"type":"inlineMath","value":"h_2","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>h</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">h_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">h</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"lUUWTJtPCc"},{"type":"text","value":", fold with ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"ifmLSfHzDs"},{"type":"inlineMath","value":"\\alpha_1","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Œ±</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\alpha_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"b7CdtYSDHL"}],"key":"EtQCjGvVvQ"},{"type":"tableCell","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"FRI & Sumcheck","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"ABAO7nG3Vz"}],"key":"UGu9RnKKPX"}],"key":"G55u9t74yj"},{"type":"tableRow","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"‚Ä¶","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"w0TsDlsMgX"}],"key":"T1Sy0b9MA0"},{"type":"tableCell","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"‚Ä¶","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"uKowfgwSzp"}],"key":"jKXu5MxN6p"},{"type":"tableCell","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"‚Ä¶","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"OE9FGyl2dc"}],"key":"TWSNL3tsSj"}],"key":"wB4T08sgso"},{"type":"tableRow","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"n","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"vFLfdutPy6"}],"key":"EpDi13wTg1"},{"type":"tableCell","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"send ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"fEQWQ7OlXt"},{"type":"inlineMath","value":"h_n","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>h</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">h_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">h</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"n2EeLT3Awx"},{"type":"text","value":"; open ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"ibdzMg1K71"},{"type":"strong","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"one","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"RobSaVNw1Y"}],"key":"b4KFtJ7Cuu"},{"type":"text","value":" code symbol = ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"xny7vlc3oY"},{"type":"inlineMath","value":"w","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span>","key":"gSsEtVrxLE"}],"key":"TG7gckpro6"},{"type":"tableCell","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"FRI constant & Sumcheck leaf","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"tsvWcQf4Uc"}],"key":"ZpGnYBFN5N"}],"key":"wW8ea8RnYd"}],"key":"SFt4XaGnjW"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":32,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"strong","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"FRI","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"Vp4johK5aB"}],"key":"s0OqftMvaa"},{"type":"text","value":" + Merkle paths ‚áí verifier accepts ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"zuorJEfb63"},{"type":"inlineMath","value":"f(\\alpha) = w","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>Œ±</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">f(\\alpha) = w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span>","key":"NygCTV1v9d"}],"key":"INPBdnEK58"},{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"strong","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Sumcheck","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"O3rXOY8ypj"}],"key":"BWsSiGlCrK"},{"type":"text","value":", fed with the ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"Wh7RKNHQu8"},{"type":"emphasis","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"same","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"ecZUWzMyJq"}],"key":"CRhF2zh7XF"},{"type":"text","value":" ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"KTxE9D0AvG"},{"type":"inlineMath","value":"\\alpha","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œ±</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span></span></span></span>","key":"wTCzHLd4us"},{"type":"text","value":"‚Äôs and that single scalar","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"t2aO3JZIg2"},{"type":"break","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"T5OSu46JUY"},{"type":"inlineMath","value":"w","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span>","key":"xKOUhDWY12"},{"type":"text","value":", ‚áí verifier accepts ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"n7bjmcNbY3"},{"type":"inlineMath","value":"\\sum f(b) \\, eq(u, b) = v","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>‚àë</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mtext>‚Äâ</mtext><mi>e</mi><mi>q</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">\\sum f(b) \\, eq(u, b) = v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">‚àë</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span>","key":"hm7gYbmdFU"},{"type":"break","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"JSFhd3jFmN"},{"type":"text","value":"‚áí Algebra then forces ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"fa8XGWQyzI"},{"type":"inlineMath","value":"f(u) = v","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">f(u) = v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span>","key":"oZHOWj5JNi"}],"key":"KIrREphuVp"}],"key":"Hqqp00H3Nw"},{"type":"thematicBreak","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"iOCBLDkO1O"},{"type":"heading","depth":2,"position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"3 ¬∑ Soundness intuition","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"FyeFmr166a"}],"identifier":"id-3-soundness-intuition","label":"3 ¬∑ Soundness intuition","html_id":"id-3-soundness-intuition","implicit":true,"key":"FslvYUVsOD"},{"type":"paragraph","position":{"start":{"line":41,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"text","value":"Because every fold is checked ","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"RG9HAlLCwO"},{"type":"strong","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"twice","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"NCIcG7UQkV"}],"key":"ZoONvNo0nz"},{"type":"text","value":" (FRI ","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"rkYagnOISW"},{"type":"emphasis","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"and","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"GlAUPrbbUY"}],"key":"dCWz6Wt6K6"},{"type":"text","value":" Sumcheck), a cheating","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"AtQhyLK3rX"},{"type":"break","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"U7jHHb2lf0"},{"type":"text","value":"prover must satisfy both or be caught with probability","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"M4Wuo3xKH4"},{"type":"break","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"ciDe3Q83z8"},{"type":"inlineMath","value":"\\approx 1 / |F|","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>‚âà</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"normal\">‚à£</mi><mi>F</mi><mi mathvariant=\"normal\">‚à£</mi></mrow><annotation encoding=\"application/x-tex\">\\approx 1 / |F|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4831em;\"></span><span class=\"mrel\">‚âà</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/‚à£</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord\">‚à£</span></span></span></span>","key":"zGE8OH8EaA"},{"type":"text","value":" per round. The verifier inspects only","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"Z71F0ohgr3"},{"type":"break","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"olzxVMHW4v"},{"type":"inlineMath","value":"O(\\log n)","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>‚Å°</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(\\log n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>","key":"ZN4kKAZXy0"},{"type":"text","value":" field elements.","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"RA3GOXPApB"}],"key":"FvrCVRuv7Z"},{"type":"blockquote","position":{"start":{"line":46,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":46,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"strong","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"text","value":"Shared randomness = one proof","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"hR9kuCGBUp"}],"key":"x21z5c3SHe"},{"type":"break","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"QlCmNz1q80"},{"type":"text","value":"FRI authenticates one hidden evaluation ","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"qEyMV6OaKx"},{"type":"inlineMath","value":"w","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span>","key":"T6eJdlHivf"},{"type":"text","value":";","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"KXh7GFyQ2s"},{"type":"break","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"G0yIopNp3f"},{"type":"text","value":"Sumcheck converts that single fact into the original claim","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"OWliVNUVEq"},{"type":"break","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"ig5ZpUCjpq"},{"type":"inlineMath","value":"f(u) = v","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">f(u) = v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span>","key":"yz5xXWPKq8"},{"type":"text","value":".","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"NJ2U4KW3iA"}],"key":"yIFhAo9Qwc"}],"key":"T7ks42MEhw"}],"key":"liYiAn2Ryn"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"End-to-end picture for (n = 3)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QXBN3dBgJq"}],"identifier":"end-to-end-picture-for-n-3","label":"End-to-end picture for (n = 3)","html_id":"end-to-end-picture-for-n-3","implicit":true,"key":"uFVV9ljmaW"},{"type":"mermaid","value":"flowchart TD\n    %% Style tweaks\n    classDef b fill:#f0f0ff,stroke:#9aa;\n    classDef s fill:#fff8dc,stroke:#d9a;\n\n    %% Commit phase\n    A0([\"**8-entry eval&nbsp;vector**<br>f = [1..8]\"]):::b\n    A1([\"Reed‚ÄìSolomon encode ‚Üí<br>codeword c‚ÇÄ (len = 8¬∑œÅ)\"]):::b\n    A2([\"Merkle-root<br>**C‚ÇÄ**\"]):::b\n\n    A0 -->|encode| A1 -->|Merkle| A2\n    subgraph G1[ Prover side ]\n    A0;A1;A2\n    end\n\n    %% Shared loop\n    B0((\"k = 3 rounds\")):::s\n\n    %% Round boxes\n    R1[\"Round 0<br>split even/odd<br>fold with Œ±‚ÇÄ\"]\n    R2[\"Round 1<br>split even/odd<br>fold with Œ±‚ÇÅ\"]\n    R3[\"Round 2<br>split even/odd<br>fold with Œ±‚ÇÇ (last)\"]\n\n    %% Folding arrows\n    A2 --> R1 --> R2 --> R3\n\n    %% Sumcheck track\n    subgraph Sumcheck[ Sumcheck track ]\n        direction LR\n        S8[\"f (8)\"]-->S4[\"f¬π (4)\"]-->S2[\"f¬≤ (2)\"]-->S1[\"leaf (1)\"]\n    end\n\n    %% FRI track\n    subgraph FRI[ FRI track ]\n        direction LR\n        C8[\"c‚ÇÄ (8¬∑œÅ)\"]-->C4[\"c‚ÇÅ\"]-->C2[\"c‚ÇÇ\"]-->C1[\"constant w\"]\n    end\n\n    %% Œ± arrows\n    R1 -- same Œ±‚ÇÄ --> C4 & S4\n    R2 -- same Œ±‚ÇÅ --> C2 & S2\n    R3 -- same Œ±‚ÇÇ --> C1 & S1\n\n    %% Verifier checks\n    V1[\"Merkle paths + FRI\\n‚áí accept f(Œ±)=w?\"]:::b\n    V2[\"Sumcheck equalities\\n‚áí accept Œ£f eq(u,¬∑)=v?\"]:::b\n    C1 --> V1\n    S1 --> V2\n    V1 --> V2\n\n    %% Final statement\n    V2 --> V3([\"‚úì conclude  f(u)=v\"]):::b","position":{"start":{"line":3,"column":1},"end":{"line":55,"column":1}},"key":"ZE7UMPSBiQ"}],"key":"AXrhhEZFa9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"sage","executable":true,"value":"# Basefold PCS demo  (n = 3, f = [1‚Ä¶8]) \nimport basefold_rs_pcs as pcs_mod              \nfrom merlin.merlin_transcript import MerlinTranscript\nfrom utils import inner_product               \n\nField            = pcs_mod.Field              \nMerkleTree       = pcs_mod.MerkleTree\nBASEFOLD_RS_PCS  = pcs_mod.BASEFOLD_RS_PCS\nMLEPolynomial    = pcs_mod.MLEPolynomial\n\n# public instance \nevals   = [Field(i) for i in range(1, 9)]          # f = [1,2,3,4,5,6,7,8]\nu_point = [Field(alpha0), Field(alpha1), Field(alpha2)]   # the same Œ±‚Äôs\n\nMLEPolynomial.set_field_type(Field)\nf_mle = MLEPolynomial(evals, 3)\n\n# v = f(u)\neq_vec = MLEPolynomial.eqs_over_hypercube(u_point)\nv_true = inner_product(evals, eq_vec, Field.zero())\nassert f_mle.evaluate(u_point) == v_true\n\nprint(f\"Public claim :  f({u_point}) = v = {v_true}\\n\")\n\n# set-up prover / verifier objects \npcs = BASEFOLD_RS_PCS(MerkleTree, debug=2)     \npcs.security_bits = 32 \ntr  = MerlinTranscript(b\"basefold-rs-demo\")\n\n# commitment\nf_cm = pcs.commit(f_mle)\nprint(\"Commitment root :\", f_cm.cm, \"‚Ä¶\\n\")\n\n# prover produces argument \nprint(\"üïê  Prover: generating proof ‚Ä¶\")\nv_proved, argument = pcs.prove_eval(f_cm, f_mle, u_point, tr.fork(b\"prove\"))\nprint(\"‚ÑπÔ∏è  Proof generated.\\n\")\nassert v_proved == v_true\n\n# verifier checks\nprint(\"üïê  Verifier: checking proof ‚Ä¶\")\nok = pcs.verify_eval(f_cm, u_point, v_true, argument, tr.fork(b\"verify\"))\nprint(\"‚úÖ  Proof verified =\", ok)\n","key":"ov33gof9LB"},{"type":"output","id":"O2Xwr-lDrGkdj5ELTQ7Om","data":[{"name":"stdout","output_type":"stream","text":"Public claim :  f([8, 2, 1]) = v = 17\n\nCommitment root : e219f04c2b44cc862b9b481e4db03e9e79d4b280b7e1ba860fcb683f3d7f5b1d ‚Ä¶\n\nüïê  Prover: generating proof ‚Ä¶\nP> f_len=8, k=3, c_len =64\nP> check f0_code\nP> check f0_code passed\nP> Round 0\nP> alpha[0] = 2117879509\nP> Round 1\nP> alpha[1] = 4293038735\nP> Round 2\nP> alpha[2] = 3383722775\nP> final_sum(33557169405938763609452287200546002464000) = f(alpha_vec)*eq(alpha_vec), 24238848080 * 1384437465641261761208756550800\nP> queries=22, query_indices=[[(6, 7), (2, 3), (0, 1)], [(50, 51), (24, 25), (12, 13)], [(40, 41), (20, 21), (10, 11)], [(12, 13), (6, 7), (2, 3)], [(8, 9), (4, 5), (2, 3)], [(24, 25), (12, 13), (6, 7)], [(62, 63), (30, 31), (14, 15)], [(4, 5), (2, 3), (0, 1)], [(54, 55), (26, 27), (12, 13)], [(58, 59), (28, 29), (14, 15)], [(28, 29), (14, 15), (6, 7)], [(46, 47), (22, 23), (10, 11)], [(42, 43), (20, 21), (10, 11)], [(52, 53), (26, 27), (12, 13)], [(30, 31), (14, 15), (6, 7)], [(2, 3), (0, 1), (0, 1)], [(34, 35), (16, 17), (8, 9)], [(38, 39), (18, 19), (8, 9)], [(48, 49), (24, 25), (12, 13)], [(10, 11), (4, 5), (2, 3)], [(0, 1), (0, 1), (0, 1)], [(44, 45), (22, 23), (10, 11)]]\ncheck query_paths\nP> check query_paths passed\nP> check merkle_paths\nP> roots=['e219f04c2b44cc862b9b481e4db03e9e79d4b280b7e1ba860fcb683f3d7f5b1d', '1503d2106cdb0d2affd6eb899e9bde549ea676c55e5bff722c94e5660cb49300', '84182f035d9dabf6e92a3a9800f58ce2ed327936dceb3a0431e394741c5824aa']\nP>> check merkle_path-0 passed\nP>> check merkle_path-1 passed\nP>> check merkle_path-2 passed\nP>> check merkle_path-3 passed\nP>> check merkle_path-4 passed\nP>> check merkle_path-5 passed\nP>> check merkle_path-6 passed\nP>> check merkle_path-7 passed\nP>> check merkle_path-8 passed\nP>> check merkle_path-9 passed\nP>> check merkle_path-10 passed\nP>> check merkle_path-11 passed\nP>> check merkle_path-12 passed\nP>> check merkle_path-13 passed\nP>> check merkle_path-14 passed\nP>> check merkle_path-15 passed\nP>> check merkle_path-16 passed\nP>> check merkle_path-17 passed\nP>> check merkle_path-18 passed\nP>> check merkle_path-19 passed\nP>> check merkle_path-20 passed\nP>> check merkle_path-21 passed\nP> check merkle_paths passed\n‚ÑπÔ∏è  Proof generated.\n\nüïê  Verifier: checking proof ‚Ä¶\nV> alpha[0] = 2117879509\nV> alpha[1] = 4293038735\nV> alpha[2] = 3383722775\nV> len(codes)=2, queries=22\nV> queries=22, query_indices=[[(6, 7), (2, 3), (0, 1)], [(50, 51), (24, 25), (12, 13)], [(40, 41), (20, 21), (10, 11)], [(12, 13), (6, 7), (2, 3)], [(8, 9), (4, 5), (2, 3)], [(24, 25), (12, 13), (6, 7)], [(62, 63), (30, 31), (14, 15)], [(4, 5), (2, 3), (0, 1)], [(54, 55), (26, 27), (12, 13)], [(58, 59), (28, 29), (14, 15)], [(28, 29), (14, 15), (6, 7)], [(46, 47), (22, 23), (10, 11)], [(42, 43), (20, 21), (10, 11)], [(52, 53), (26, 27), (12, 13)], [(30, 31), (14, 15), (6, 7)], [(2, 3), (0, 1), (0, 1)], [(34, 35), (16, 17), (8, 9)], [(38, 39), (18, 19), (8, 9)], [(48, 49), (24, 25), (12, 13)], [(10, 11), (4, 5), (2, 3)], [(0, 1), (0, 1), (0, 1)], [(44, 45), (22, 23), (10, 11)]]\nV> check merkle_path-0 passed\nV> check merkle_path-1 passed\nV> check merkle_path-2 passed\nV> check merkle_path-3 passed\nV> check merkle_path-4 passed\nV> check merkle_path-5 passed\nV> check merkle_path-6 passed\nV> check merkle_path-7 passed\nV> check merkle_path-8 passed\nV> check merkle_path-9 passed\nV> check merkle_path-10 passed\nV> check merkle_path-11 passed\nV> check merkle_path-12 passed\nV> check merkle_path-13 passed\nV> check merkle_path-14 passed\nV> check merkle_path-15 passed\nV> check merkle_path-16 passed\nV> check merkle_path-17 passed\nV> check merkle_path-18 passed\nV> check merkle_path-19 passed\nV> check merkle_path-20 passed\nV> check merkle_path-21 passed\nV> check folding-0 passed\nV> check folding-1 passed\nV> check folding-2 passed\nV> check folding-3 passed\nV> check folding-4 passed\nV> check folding-5 passed\nV> check folding-6 passed\nV> check folding-7 passed\nV> check folding-8 passed\nV> check folding-9 passed\nV> check folding-10 passed\nV> check folding-11 passed\nV> check folding-12 passed\nV> check folding-13 passed\nV> check folding-14 passed\nV> check folding-15 passed\nV> check folding-16 passed\nV> check folding-17 passed\nV> check folding-18 passed\nV> check folding-19 passed\nV> check folding-20 passed\nV> check folding-21 passed\n‚úÖ  Proof verified = True\n"}],"key":"NXyFEPLi3m"}],"key":"dftLfQA9Iq"}],"key":"au5hmuPZr6"},"references":{"cite":{"order":[],"data":{}}}}
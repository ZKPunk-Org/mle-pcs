
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>缺失的协议 PH23-PCS（一） &#8212; Polynomial Commitment Schemes</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ph23/ph23-pcs-01.zh';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="缺失的协议 PH23-PCS（二）" href="ph23-pcs-02.zh.html" />
    <link rel="prev" title="Notes on Virgo-PCS" href="../virgo-pcs/virgo-pcs-01.zh.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Polynomial Commitment Schemes - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Polynomial Commitment Schemes - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome to the land of PCS!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Basefold</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../basefold/basefold-01.zh.html">Basefold 笔记：可折叠线性编码</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basefold/basefold-02.zh.html">Basefold 笔记：IOPP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basefold/basefold-03.zh.html">Basefold 笔记： MLE 求值证明</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basefold/basefold-04.zh.html">Basefold 笔记：Random Foldable Codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basefold/basefold-05.zh.html">Basefold 笔记：IOPP 可靠性分析</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">FRI</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../fri/BBHR18-FRI.zh.html">[BBHR18] FRI 论文 soundness 解析</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fri/BCIKS20-proximity-gaps.zh.html">[BCIKS20] Proximity Gaps 论文 soundness 解析</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fri/fri-proximity-gap.zh.html">Proximity Gaps 与 Correlated Agreement：FRI 安全性证明的核心</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fri/stir.zh.html">STIR: 提升码率来降低查询复杂度</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fri/whir.zh.html">WHIR: Reed-Solomon Proximity Testing with Super-Fast Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fri/deepfold.zh.html">DeepFold 笔记：协议概览</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">FRI Binius</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../fri-binius/binius-01.zh.html">Notes on FRI-Binius (Part I): Binary Towers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fri-binius/binius-02.zh.html">Notes on Binius (Part II): Subspace Polynomial</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Gemini</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../gemini/Gemini-PCS-1.zh.html">Gemini-PCS (Part I)</a></li>



<li class="toctree-l1"><a class="reference internal" href="../gemini/Gemini-PCS-2.zh.html">Gemini-PCS (Part II)</a></li>




<li class="toctree-l1"><a class="reference internal" href="../gemini/hyperkzg-pcs-01.zh.html">HyperKZG</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">KZG</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../kzg10/kzg_hiding.zh.html">理解 Hiding KZG10</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kzg10/kzg%20notes/kzg-extractability-based-on-rom.zh.html">KZG Extractability based on ROM</a></li>





</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Hyrax</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../hyrax-pcs/hyrax-01.zh.html">Notes on Hyrax-PCS</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Libra</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../libra-pcs/libra-pcs.zh.html">Libra-PCS</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Virgo</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../virgo-pcs/virgo-pcs-01.zh.html">Notes on Virgo-PCS</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">PH23</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">缺失的协议 PH23-PCS（一）</a></li>
<li class="toctree-l1"><a class="reference internal" href="ph23-pcs-02.zh.html">缺失的协议 PH23-PCS（二）</a></li>
<li class="toctree-l1"><a class="reference internal" href="ph23-pcs-fri-01.zh.html">缺失的协议 PH23-PCS（四）</a></li>
<li class="toctree-l1"><a class="reference internal" href="ph23-pcs-fri-02.zh.html">缺失的协议 PH23-PCS（五）</a></li>
<li class="toctree-l1"><a class="reference internal" href="ph23-pcs-zk.zh.html">缺失的协议 PH23-PCS（三）</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Zeromorph</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../zeromorph/zeromorph.zh.html">ZeroMorph 笔记</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zeromorph/zeromorph-fri.zh.html">Zeromorph-PCS : 对接 FRI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zeromorph/zeromorph_mapping_tutorial.html">Select SageMath Kernel First</a></li>


</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fph23/ph23-pcs-01.zh.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/ph23/ph23-pcs-01.zh.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>缺失的协议 PH23-PCS（一）</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">1. 原理概述</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#well-formedness-of-vec-c">2. Well-Formedness of <span class="math notranslate nohighlight">\(\vec{c}\)</span></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">多项式约束等式</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inner-product">3. 证明 Inner Product</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#univariate-sumcheck">Univariate Sumcheck</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grand-sum">Grand Sum</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kzg10">4. 对接 KZG10</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ph23-kzg10">5. PH23+KZG10 协议流程（简单版）</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#commit">Commit</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluation">Evaluation 证明协议</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">公共输入</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#round-1">Round 1.</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#round-2">Round 2.</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#round-3">Round 3.</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#verification">Verification</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">总结</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="ph23-pcs">
<h1>缺失的协议 PH23-PCS（一）<a class="headerlink" href="#ph23-pcs" title="Link to this heading">#</a></h1>
<p>在 Improving logarithmic derivative lookups using GKR （[PH23]） 论文中， 作者给出了一个将 MLE 转成 Univariate Polynomial 的思路，虽然论文没有给出完整的协议描述，但是这个协议也展示了在某些特性方面的优势，比如可以支持任意偏移的 Shift Argument。</p>
<p>这个方案的主要优势是能支持任意的 Shift Argument（见论文 Appendix A.2）。其次，如果对接 KZG10，那么这个 PCS Adaptor 的证明仅仅包含常数个 <span class="math notranslate nohighlight">\(\mathbb{G}_1\)</span> 元素，和对数个 <span class="math notranslate nohighlight">\(\mathbb{F}_r\)</span> 元素。这要优于 Gemini-PCS 与 Zeromorph-PCS（KT23），后者需要对数个 <span class="math notranslate nohighlight">\(\mathbb{G}_1\)</span> 元素。</p>
<p>这个协议的思路与 Virgo-PCS 有类似之处，都是将 MLE 的多项式运算看成是一个求和，并且都是利用 Univariate Sumcheck 协议来完成「求和证明」。但是 PH23-PCS 还要求 Prover 证明 MLE Lagrange Polynomial 在求值点上的值，从而减轻 Verifier 的负担；而 Virgo-PCS 则利用了 GKR 协议来做到这一点。另一个不同之处是，Virgo-PCS 要求 MLE 多项式需要是一个 Coefficient Form 的表示，因此 Virgo-PCS 利用 GKR 电路来完成 MLE 多项式由 Evaluation Form 到 Coefficient Form 的转换的计算正确性的证明。</p>
<p>这个文章系列补全了 [PH23] 论文中关于 PH23-PCS 的描述，并给出了 PH23-KZG10 的一个简化协议来帮助大家理解这个协议的基本思路。</p>
<p>本文先详细介绍 PH23-PCS-Adaptor 的基础原理，然后给出 PH23-KZG10 的一个简单协议实现。</p>
<section id="id1">
<h2>1. 原理概述<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<p>在解释 Prover 如何证明一个 MLE 多项式 <span class="math notranslate nohighlight">\(\tilde{f}(\vec{X})\)</span> 的 Evaluation 之前，我们先回忆下 MLE 多项式的定义：</p>
<div class="math notranslate nohighlight">
\[
\tilde{f}(X_0, X_1, \ldots, X_{n-1}) = \sum_{i=0}^{N-1} a_i \cdot \overset{\sim}{eq}(\mathsf{bits}(i), (X_0, X_1, \ldots, X_{n-1}))
\]</div>
<p>这里 <span class="math notranslate nohighlight">\(N=2^n\)</span> 。
当要计算 <span class="math notranslate nohighlight">\(\tilde{f}(\vec{X})\)</span> 在 <span class="math notranslate nohighlight">\(\vec{X}=(u_0, u_1, \ldots, u_{n-1})\)</span> 处的值时，我们需要计算 <span class="math notranslate nohighlight">\(\sum_{i=0}^{N-1} a_i \cdot \overset{\sim}{eq}(\mathsf{bits}(i), \vec{u})\)</span>。为了方便解释，我们引入一个新的向量 <span class="math notranslate nohighlight">\(\vec{c}\)</span> ，其中的每一个元素 <span class="math notranslate nohighlight">\(c_i\)</span> = <span class="math notranslate nohighlight">\(\overset{\sim}{eq}(\mathsf{bits}(i), \vec{u})\)</span>。</p>
<p>如果 <span class="math notranslate nohighlight">\(n=3\)</span> and <span class="math notranslate nohighlight">\(N=8\)</span>, 那么 <span class="math notranslate nohighlight">\(\vec{c}\)</span> 的值可以全部枚举出：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{array}{cccc}
c_0 &amp;= &amp;(1-u_0)&amp;(1-u_1)&amp;(1-u_2) \\
c_1 &amp;= &amp;u_0&amp;(1-u_1)&amp;(1-u_2)  \\
c_2 &amp;= &amp;(1-u_0) &amp;u_1 &amp;(1-u_2) \\
c_3 &amp;= &amp;u_0 &amp;u_1 &amp;(1-u_2) \\
c_4 &amp;= &amp;(1-u_0)&amp;(1-u_1) &amp; u_2 \\
c_5 &amp;= &amp;u_0&amp;(1-u_1)&amp;u_2  \\
c_6 &amp;= &amp;(1-u_0) &amp;u_1 &amp;u_2 \\
c_7 &amp;= &amp;u_0 &amp;u_1 &amp;u_2 \\
\end{array}
\end{split}\]</div>
<p>可以看出，<span class="math notranslate nohighlight">\(\vec{c}\)</span> 的元素定义具有一定的规律。比如 <span class="math notranslate nohighlight">\(c_i\)</span> 是 <span class="math notranslate nohighlight">\(s\)</span> 个数值的连乘，这些数值也具有一定的规律。其中 <span class="math notranslate nohighlight">\((1-u_i)\)</span> 表示二进制的 <span class="math notranslate nohighlight">\(0\)</span> ，而 <span class="math notranslate nohighlight">\(u_i\)</span> 表示二进制的 <span class="math notranslate nohighlight">\(1\)</span> 。比如 <span class="math notranslate nohighlight">\(c_7\)</span> 是由三个数相乘，分别为 <span class="math notranslate nohighlight">\(u_0, u_1, u_2\)</span> ，这表示 <code class="docutils literal notranslate"><span class="pre">(111)</span></code>，这恰好是 <span class="math notranslate nohighlight">\(7\)</span> 的二进制表示。又比如 <span class="math notranslate nohighlight">\(c_5\)</span> 是由三个数相乘，分别为 <span class="math notranslate nohighlight">\(u_0, (1-u_1), u_2\)</span> ，这表示 <code class="docutils literal notranslate"><span class="pre">(101)</span></code>，正是 <span class="math notranslate nohighlight">\(5\)</span> 的二进制表示。</p>
<p>而 PH23 的关键思路是，是否可以让 Prover 先承诺向量 <span class="math notranslate nohighlight">\(\vec{c}\)</span>，然后证明 <span class="math notranslate nohighlight">\(\vec{c}\)</span> 的每一个元素都是按照上面的二进制规律去正确定义的。如果可以，那么 Prover 再证明一个 Inner Product 关系，即可以证明 <span class="math notranslate nohighlight">\(\langle \vec{a}, \vec{c} \rangle = v\)</span> ，这正是等价于证明 <span class="math notranslate nohighlight">\(\tilde{f}(\vec{X})=v\)</span> 。</p>
<p>因此 PH23 的证明协议分为两部分：</p>
<ol class="arabic simple">
<li><p>证明 <span class="math notranslate nohighlight">\(\vec{c}\)</span> 向量的 Well-Formedness。</p></li>
<li><p>证明 <span class="math notranslate nohighlight">\(\langle \vec{a}, \vec{c} \rangle = v\)</span> 。</p></li>
</ol>
</section>
<section id="well-formedness-of-vec-c">
<h2>2. Well-Formedness of <span class="math notranslate nohighlight">\(\vec{c}\)</span><a class="headerlink" href="#well-formedness-of-vec-c" title="Link to this heading">#</a></h2>
<p>继续 <span class="math notranslate nohighlight">\(s=3\)</span> 的 <span class="math notranslate nohighlight">\(\vec{c}\)</span> 的例子，</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{array}{cccc}
c_0 &amp;= &amp;(1-u_0)&amp;(1-u_1)&amp;(1-u_2) \\
c_1 &amp;= &amp;u_0&amp;(1-u_1)&amp;(1-u_2)  \\
c_2 &amp;= &amp;(1-u_0) &amp;u_1 &amp;(1-u_2) \\
c_3 &amp;= &amp;u_0 &amp;u_1 &amp;(1-u_2) \\
c_4 &amp;= &amp;(1-u_0)&amp;(1-u_1) &amp; u_2 \\
c_5 &amp;= &amp;u_0&amp;(1-u_1)&amp;u_2  \\
c_6 &amp;= &amp;(1-u_0) &amp;u_1 &amp;u_2 \\
c_7 &amp;= &amp;u_0 &amp;u_1 &amp;u_2 \\
\end{array}
\end{split}\]</div>
<p>观察到</p>
<div class="math notranslate nohighlight">
\[
\frac{c_0}{c_4} = \frac{1-u_2}{u_2}
\]</div>
<p>于是，如果 <span class="math notranslate nohighlight">\(c_0\)</span> 是正确的，那么我们可以通过证明下面的约束等式</p>
<div class="math notranslate nohighlight">
\[
c_0\cdot u_2 - c_4\cdot (1-u_2) = 0
\]</div>
<p>来证明 <span class="math notranslate nohighlight">\(c_4\)</span> 是正确的。接下来，观察</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\frac{c_0}{c_2} = 
\frac{c_4}{c_6} = \frac{1-u_1}{u_1} \\
\end{split}\]</div>
<p>由此我们可以推断，如果 <span class="math notranslate nohighlight">\(c_0\)</span> 是正确的，那么下面两个约束等式保证了 <span class="math notranslate nohighlight">\(c_2, c_6\)</span> 是正确的：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
c_0\cdot u_1 - c_2\cdot (1-u_1) = 0 \\
c_4\cdot u_1 - c_6\cdot (1-u_1) = 0 \\
\end{split}
\end{split}\]</div>
<p>接下来，我们可以证明 <span class="math notranslate nohighlight">\(c_1, c_3, c_5, c_7\)</span> 是正确的，因为它们可以由 <span class="math notranslate nohighlight">\(c_0, c_2, c_4, c_6\)</span> 推导出来，而 <span class="math notranslate nohighlight">\(c_0, c_2, c_4, c_6\)</span> 已经在上一步中证明正确：
$<span class="math notranslate nohighlight">\(
\begin{split}
c_0 \cdot u_0 - c_1 \cdot (1-u_0) = 0 \\
c_2 \cdot u_0 - c_3 \cdot (1-u_0) = 0 \\
c_4 \cdot u_0 - c_5 \cdot (1-u_0) = 0 \\
c_6 \cdot u_0 - c_7 \cdot (1-u_0) = 0 \\
\end{split}
\)</span>$</p>
<p>最后结论，通过上面的 <span class="math notranslate nohighlight">\(1+2+4\)</span> 个约束等式，我们在已知 <span class="math notranslate nohighlight">\(c_0\)</span> 正确的前提下，可以证明 <span class="math notranslate nohighlight">\(c_1, c_2, c_3, c_4, c_5, c_6, c_7\)</span> 都是正确的。向量 <span class="math notranslate nohighlight">\(\vec{c}\)</span> 的元素之间的推理关系如下图所示：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{array}{ccccc}
c_4 &amp; &amp;  &amp; &amp; \\
c_2 &amp; c_6 &amp;  \\
c_1&amp; c_3 &amp; c_5&amp; c_7 \\
\cdots  &amp; &amp; \\
\end{array}
\end{split}\]</div>
<p>假设 <span class="math notranslate nohighlight">\(H\)</span> 为大小为 <span class="math notranslate nohighlight">\(8\)</span> 的有限域 <span class="math notranslate nohighlight">\(\mathbb{F}_p\)</span> 的乘法子群，<span class="math notranslate nohighlight">\(H=\{1, \omega, \omega^2, \omega^3, \omega^4, \omega^5, \omega^6, \omega^7\}\)</span>，其中 <span class="math notranslate nohighlight">\(\omega\in \mathbb{F}_p\)</span> 是 <span class="math notranslate nohighlight">\(8\)</span> 次单位根。并且将 <span class="math notranslate nohighlight">\(\{L_i(X)\}_{i=0}^{N-1}\)</span> 记为 <span class="math notranslate nohighlight">\(H\)</span> 上的 Lagrange Basis 多项式。</p>
<p>然后我们可以引入 <span class="math notranslate nohighlight">\(c(X)\)</span> 作为 <span class="math notranslate nohighlight">\(\vec{c}\)</span> 按照 Lagrange Basis 编码的多项式：</p>
<div class="math notranslate nohighlight">
\[
c(X) = \sum_{i=0}^{N-1} c_i \cdot L_i(X)
\]</div>
<p>容易验证，<span class="math notranslate nohighlight">\(c(\omega^i) = c_i\)</span>，其中 <span class="math notranslate nohighlight">\(i=0,1,2,\ldots, N-1\)</span>。</p>
<p>进一步，上面证明 <span class="math notranslate nohighlight">\(c_1, c_3, c_5, c_7\)</span> 的四个约束等式可以合并为一个多项式约束等式：</p>
<div class="math notranslate nohighlight">
\[
(X-\omega)(X-\omega^3)(X-\omega^5)(X-\omega^7)\cdot \big(c(X)u_0 - c(\omega\cdot X)(1-u_0)\big) = 0, \quad X\in H
\]</div>
<p>我们可以代入 <span class="math notranslate nohighlight">\(X=\omega^2\)</span>，上面的约束等式则对应于：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
c(\omega^2) \cdot u_0 - c(\omega^3) \cdot (1-u_0) = c_2 \cdot u_0 - c_3 \cdot (1-u_0) = 0 \\
\end{split}\]</div>
<p>分别代入 <span class="math notranslate nohighlight">\(X=\omega, X=\omega^4, X=\omega^6\)</span>，我们可以得到证明 <span class="math notranslate nohighlight">\(c_1, c_5, c_7\)</span> 正确性的约束等式。</p>
<p>而 <span class="math notranslate nohighlight">\((X-\omega)(X-\omega^3)(X-\omega^5)(X-\omega^7)\)</span> 这个多项式像是一个 Selector 多项式，过滤掉不满足的 <span class="math notranslate nohighlight">\(X\)</span> 值。</p>
<p>利用这个方法，我们可以利用 <span class="math notranslate nohighlight">\(n=\log{N}\)</span> 个多项式约束来证明 <span class="math notranslate nohighlight">\(\vec{c}\)</span> 的 Well-Formedness。</p>
<p>对于 <span class="math notranslate nohighlight">\(N=8\)</span> 的例子，我们需要引入 <span class="math notranslate nohighlight">\(3\)</span> 个 Selector 多项式 <span class="math notranslate nohighlight">\(s_0(X), s_1(X), s_2(X)\)</span>，</p>
<div class="math notranslate nohighlight">
\[
s_i(X) = \frac{v_H(X)}{v_{H_i}(X)}, \qquad i=0,1,2
\]</div>
<p>其中 <span class="math notranslate nohighlight">\(v_H(X)\)</span> 与 <span class="math notranslate nohighlight">\(v_{H_i}(X)\)</span> 分别是 Domain <span class="math notranslate nohighlight">\(H\)</span> 与 <span class="math notranslate nohighlight">\(H_i\)</span> 的 Vanishing 多项式。而 <span class="math notranslate nohighlight">\(H_i\)</span> 是 <span class="math notranslate nohighlight">\(H\)</span> 的子群，并且满足下面的 Group Tower 关系：</p>
<div class="math notranslate nohighlight">
\[
\{1\} = H_0 \sub H_1 \sub H_2 \sub H_3 = H
\]</div>
<p>他们的定义如下：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
H = H_3 &amp;= (1, \omega, \omega^2, \omega^3, \omega^4, \omega^5, \omega^6, \omega^7) \\
H_2 &amp; = (1, \omega^2, \omega^4, \omega^6)\\
H_1 &amp; = (1, \omega^4)\\
H_0 &amp; = (1)\\
\end{split}
\end{split}\]</div>
<p>自然地，Selector 多项式 <span class="math notranslate nohighlight">\(s_0(X), s_1(X), s_2(X)\)</span> 的表示如下：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
s_0(X) &amp;= (X-\omega)(X-\omega^2)(X-\omega^3)(X+1)(X+\omega)(X+\omega^2)(X+\omega^3) \\
s_1(X) &amp;= (X-\omega)(X-\omega^2)(X-\omega^3)(X+\omega)(X+\omega^2)(X+\omega^3) \\
s_2(X) &amp;= (X-\omega)(X-\omega^3)(X+\omega)(X+\omega^3) \\
\end{split}
\end{split}\]</div>
<section id="id2">
<h3>多项式约束等式<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>保证 <span class="math notranslate nohighlight">\(c_0\)</span> 正确的约束等式可以表示为下面的多项式约束：</p>
<div class="math notranslate nohighlight">
\[
s_0(X)\cdot \big(c(X) - (1-u_0)(1-u_1)(1-u_{2})\big) = 0, \quad X\in H
\]</div>
<p>保证 <span class="math notranslate nohighlight">\(c_4\)</span> 正确的约束等式可以表示为下面的多项式约束：</p>
<div class="math notranslate nohighlight">
\[
s_0(X)\cdot \big(c(X)u_2 - c(\omega^4\cdot X)(1-u_2)\big) = 0, \quad X\in H
\]</div>
<p>下面是保证 <span class="math notranslate nohighlight">\(c_2, c_6\)</span> 正确的约束等式：</p>
<div class="math notranslate nohighlight">
\[
s_1(X)\cdot \big(c(X)u_1 - c(\omega^2\cdot X)(1-u_1)\big) = 0, \quad X\in H
\]</div>
<p>最后，保证 <span class="math notranslate nohighlight">\(c_1,c_3,c_5,c_7\)</span> 正确的约束等式：</p>
<div class="math notranslate nohighlight">
\[
s_2(X)\cdot \big(c(X)u_0 - c(\omega\cdot X)(1-u_0)\big) = 0, \quad X\in H
\]</div>
</section>
</section>
<section id="inner-product">
<h2>3. 证明 Inner Product<a class="headerlink" href="#inner-product" title="Link to this heading">#</a></h2>
<p>证明的第二个部分是证明 <span class="math notranslate nohighlight">\(\langle \vec{a}, \vec{c} \rangle = v\)</span>。假设 <span class="math notranslate nohighlight">\(a(X)\)</span> 是向量 <span class="math notranslate nohighlight">\(\vec{a}\)</span> 的编码，即 <span class="math notranslate nohighlight">\(a(X)\mid_H=\vec{a}\)</span>，那么 <span class="math notranslate nohighlight">\(a(X)\)</span> 被承诺为 <span class="math notranslate nohighlight">\([a(\tau)]_1\)</span>，加上 <span class="math notranslate nohighlight">\(c(X)\)</span> 的承诺，<span class="math notranslate nohighlight">\([c(\tau)]_1\)</span> ，我们可以使用 Univariate Sumcheck 协议来证明内积。</p>
<section id="univariate-sumcheck">
<h3>Univariate Sumcheck<a class="headerlink" href="#univariate-sumcheck" title="Link to this heading">#</a></h3>
<p>这里我们先看一个定理(Remark 5.6 in [BCRSVW19], Sec.3 in [RZ21], Sec.5.1 in [CHMMVW19])：对任意的 <span class="math notranslate nohighlight">\(P(X)\in \mathbb{F}[X]\)</span>，一个乘法子群 <span class="math notranslate nohighlight">\(H\sub \mathbb{F}\)</span>，<span class="math notranslate nohighlight">\(P(X)\)</span> 可以分解为：</p>
<div class="math notranslate nohighlight">
\[
P(X) = q(X)\cdot v_H(X) + X\cdot g(X) + (v/N)
\]</div>
<p>这里 <span class="math notranslate nohighlight">\(v\)</span> 是 <span class="math notranslate nohighlight">\(P(X)\)</span> 在 <span class="math notranslate nohighlight">\(H\)</span> 上的求和，即</p>
<div class="math notranslate nohighlight">
\[
\sum_{\omega\in H}P(\omega)=v
\]</div>
<p>因此，我们可以使用这个定理来证明两个向量的内积。如果 <span class="math notranslate nohighlight">\(a(X)\cdot c(X)\)</span> 可以表示为下面的等式，</p>
<div class="math notranslate nohighlight">
\[
a(X)\cdot c(X) = q(X)\cdot v_H(X) + X\cdot g(X) + (v/N), \quad \deg(g)&lt;N-1
\]</div>
<p>那么 <span class="math notranslate nohighlight">\(\langle \vec{a}, \vec{c}\rangle = v\)</span>。</p>
<p>Prover 可以发送 <span class="math notranslate nohighlight">\(q(X)\)</span> 与 <span class="math notranslate nohighlight">\(g(X)\)</span> 的承诺，然后 Verifier 通过挑战 <span class="math notranslate nohighlight">\(\zeta\)</span> ，Prover 发送相关多项式在 <span class="math notranslate nohighlight">\(X=\zeta\)</span> 的取值，然后 Verifier 验证上面等式是否成立：</p>
<div class="math notranslate nohighlight">
\[
a(\zeta)\cdot c(\zeta) \overset{?}{=} q(\zeta)\cdot v_H(\zeta) + \zeta\cdot g(\zeta) + (v/N)
\]</div>
<p>Prover 和 Verifier 再通过一个一元多项式承诺方案，比如 KZG10 来证明 <span class="math notranslate nohighlight">\(a(\zeta), c(\zeta), q(\zeta), g(\zeta)\)</span> 的正确性。</p>
<p>同时通过 KZG10 协议还可以证明 <span class="math notranslate nohighlight">\(g(X)\)</span> 的 Degree Bound，即 <span class="math notranslate nohighlight">\(\deg(g(X))\lt N-1\)</span>。</p>
</section>
<section id="grand-sum">
<h3>Grand Sum<a class="headerlink" href="#grand-sum" title="Link to this heading">#</a></h3>
<p>其实，我们还可以使用 Grand Sum 协议来证明两个向量的内积。</p>
<p>Univariate Sumcheck 的一个问题是它包含了一个 Degree Bound 约束，即 <span class="math notranslate nohighlight">\(\deg(g(X))\lt N-1\)</span>。这对于协议下层的KZG10 协议来说，需要进行额外的处理，这会使得协议的复杂度增加，也会引入过多的 Pairing 运算。而 Grand Sum 协议则避免了引入 Degree Bound 约束。</p>
<p>Grand Sum 协议的思路来自于 Plonk [GWC19] 中的 Grand Product Argument，而这个协议最早由 [BG12] 提出。</p>
<p>假设有一个多项式 <span class="math notranslate nohighlight">\(f(X)\)</span> 编码了向量 <span class="math notranslate nohighlight">\(\vec{f}\)</span> 的值，那么我们构造一个辅助的向量 <span class="math notranslate nohighlight">\(\vec{z}\)</span>，满足：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
z_0 &amp;= a_0\cdot c_0 \\
z_1 &amp;= z_0 + a_1\cdot c_1 \\
z_2 &amp;= z_1 + a_2\cdot c_2 \\
\cdots \\
z_{N-1} &amp;= z_{N-2} + a_{N-1}\cdot c_{N-1} \\
\end{split}
\end{split}\]</div>
<p>或者用更简洁的递推公式表示：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
z_0 &amp;= a_0\cdot c_0 \\
z_i &amp;= z_{i-1} + a_i\cdot c_i, \quad i=1,\ldots, N-1 \\
\end{split}
\end{split}\]</div>
<p>我们可以通过多项式 <span class="math notranslate nohighlight">\(z(X)\)</span> 来编码 <span class="math notranslate nohighlight">\(\vec{z}\)</span>，即</p>
<div class="math notranslate nohighlight">
\[
z(X) = \sum_{i=0}^{N-1} z_i \cdot L_i(X)
\]</div>
<p>其中 <span class="math notranslate nohighlight">\(L_i(X)\)</span> 是上面定义的关于 <span class="math notranslate nohighlight">\(H\)</span> 的 Lagrange Basis 多项式。</p>
<p>然后我们可以利用下面三个多项式约束来表示 <span class="math notranslate nohighlight">\(z_i\)</span> 的递推公式，从而保证 <span class="math notranslate nohighlight">\(z(X)\)</span> 的正确性：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
L_0(X)\cdot\big(z(X) - a(X)\cdot c_0\big) = 0 \\
(X-1)\cdot\big(z(X)-z(\omega^{-1}\cdot X)-a(X)\cdot c(X)) =0  \\
L_{N-1}(X)\cdot\big( z(X) - v \big) = 0 \\
\end{split}
\end{split}\]</div>
<p>注意这里我们用 <span class="math notranslate nohighlight">\(z(\omega^{-1}\cdot X)\)</span> 来表示 <span class="math notranslate nohighlight">\(z_{i-1}\)</span>。并且第三个多项式约束，保证了求和的结果等于最终的多项式运算结果 <span class="math notranslate nohighlight">\(v\)</span>。</p>
<p>利用一个 Univariate PCS 协议，比如 KZG10 或者 FRI，我们可以证明上述这些多项式约束等式的正确性。</p>
</section>
</section>
<section id="kzg10">
<h2>4. 对接 KZG10<a class="headerlink" href="#kzg10" title="Link to this heading">#</a></h2>
<p>对于证明上面列出的多项式约束，我们可以基于 KZG10 协议来实现对这些多项式等式的证明。总结下，我们有两类的多项式约束。第一类是关于 <span class="math notranslate nohighlight">\(c(X)\)</span> 的正确性的约束，第二类是关于 <span class="math notranslate nohighlight">\(z(X)\)</span> 的正确性的约束。</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
p_0(X) = &amp;s_0(X)\cdot \big(c(X) - (1-u_0)(1-u_1)\cdots(1-u_{n-1})\big)      \\
p_1(X) = &amp;s_0(X)\cdot \big(c(X)u_{n-1} - c(\omega^{2^{n-1}}\cdot X)(1-u_{n-1})\big) \\
p_2(X) = &amp;s_1(X)\cdot \big(c(X)u_{n-2} - c(\omega^{2^{n-2}}\cdot X)(1-u_{n-2})\big)  \\
\cdots &amp; \quad\cdots \\
p_{n}(X) = &amp;s_{n-1}(X)\cdot \big(c(X)u_0 - c(\omega\cdot X)(1-u_0)\big) \\
\end{aligned}
\end{split}\]</div>
<p>第二类多项式为</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
h_0(X) = &amp;L_0(X)\cdot\big(z(X) - a_0\cdot c_0\big) \\
h_1(X) = &amp;(X-1)\cdot\big(z(X)-z(\omega^{-1}\cdot X)-a(X)\cdot c(X)) \\
h_2(X) = &amp;L_{N-1}(X)\cdot\big( z(X) - v \big) \\
\end{aligned}
\end{split}\]</div>
<p>我们可以利用一个 Verifier 提供的 <span class="math notranslate nohighlight">\(\alpha\)</span> 将这些多项式聚合为一个大的多项式，记为 <span class="math notranslate nohighlight">\(h(X)\)</span> ：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
h(X) &amp;= p_0(X) + \alpha\cdot p_1(X) + \alpha^2\cdot p_2(X) + \cdots + \alpha^{n}\cdot p_{n}(X)\\  &amp; + \alpha^{n+1} \cdot h_0(X) + \alpha^{n+2} \cdot h_1(X) + \alpha^{n+3} \cdot h_2(X)
\end{aligned}
\end{split}\]</div>
<p>如果 <span class="math notranslate nohighlight">\(\vec{c}\)</span> 与 <span class="math notranslate nohighlight">\(\vec{z}\)</span> 是正确的，那么 <span class="math notranslate nohighlight">\(h(X)\)</span> 在 <span class="math notranslate nohighlight">\(X\in H\)</span> 上的取值都为零，然后我们知道 <span class="math notranslate nohighlight">\(h(X)\)</span> 在 <span class="math notranslate nohighlight">\(H\)</span> 上处处为零，因此它必然包含 <span class="math notranslate nohighlight">\(H\)</span> 的 Vanishing 多项式 <span class="math notranslate nohighlight">\(v_H(X)\)</span> 作为因式，即存在一个 Quotient 多项式 <span class="math notranslate nohighlight">\(t(X)\)</span>，使得</p>
<div class="math notranslate nohighlight">
\[
h(X) = t(X) \cdot v_H(X)
\]</div>
<p>然后 Verifier 挑战一个随机点 <span class="math notranslate nohighlight">\(\zeta\)</span>，要求 Prover 计算并发送 <span class="math notranslate nohighlight">\(a(X)\)</span>，<span class="math notranslate nohighlight">\(c(X)\)</span> 以及 <span class="math notranslate nohighlight">\(z(X)\)</span> <span class="math notranslate nohighlight">\(t(X)\)</span> 在 <span class="math notranslate nohighlight">\(\zeta\)</span> 处的取值，以及 <span class="math notranslate nohighlight">\(z(X)\)</span> 在 <span class="math notranslate nohighlight">\(X=\zeta\cdot\omega^{-1}\)</span> 处的取值，还有 <span class="math notranslate nohighlight">\(c(X)\)</span> 在 <span class="math notranslate nohighlight">\(X=\zeta\cdot\omega, \zeta\cdot\omega^2, \ldots, \zeta\cdot\omega^{2^{n-1}}\)</span> 处的取值。并提供这些求值的 KZG10 Evaluation 证明 <span class="math notranslate nohighlight">\(\pi_{kzg10}\)</span>。</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
\pi_e &amp;= \big(a(\zeta), c(\zeta), c(\zeta\cdot\omega), c(\zeta\cdot\omega^2), \ldots, c(\zeta\cdot\omega^{2^{n-1}}), z(\zeta), z(\zeta\cdot\omega^{-1}), t(\zeta)\big) \\
\pi_{kzg10} &amp;= \big(\pi_{a(\zeta)}, \pi_{c(\zeta)}, \pi_{c(\zeta\cdot\omega)}, \pi_{c(\zeta\cdot\omega^2)}, \ldots, \pi_{c(\zeta\cdot\omega^{2^{n-1}})}, \pi_{z(\zeta)}, \pi_{z(\zeta\cdot\omega^{-1})}, \pi_{t(\zeta)}\big)
\end{split}
\end{split}\]</div>
<p>Verifier 首先验证 <span class="math notranslate nohighlight">\(\pi_{kzg10}\)</span> 的正确性，
然后 Verifier 自行计算下面的公开多项式在 <span class="math notranslate nohighlight">\(X=\zeta\)</span> 处的取值：</p>
<div class="math notranslate nohighlight">
\[
s_0(\zeta) = \frac{v_H(\zeta)}{v_{H_0}(\zeta)} \quad
s_1(\zeta) = \frac{v_H(\zeta)}{v_{H_1}(\zeta)} \quad
s_2(\zeta) = \frac{v_H(\zeta)}{v_{H_2}(\zeta)} \quad
\cdots  \quad
s_{n-1}(\zeta) = \frac{v_H(\zeta)}{v_{H_{n-1}}(\zeta)}
\]</div>
<p>还有</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
L_0(\zeta) &amp;= \frac{v_H(\zeta)}{N(\zeta - 1)} \\
L_{N-1}(\zeta) &amp;= \frac{v_H(\zeta)}{N(\omega\cdot\zeta - 1)} \\
\end{split}
\end{split}\]</div>
<p>然后通过 <span class="math notranslate nohighlight">\(\pi_e\)</span> 中包含的所有的多项式运算值计算下面的值：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
p_0(\zeta) &amp;= s_0(\zeta)\cdot \big(c(\zeta) - (1-u_0)(1-u_1)\cdots(1-u_{n-1})\big) \\
p_1(\zeta) &amp;= s_0(\zeta)\cdot \big(c(\zeta)u_{n-1} - c(\omega^{2^{n-1}}\cdot\zeta)(1-u_{n-1})\big) \\
p_2(\zeta) &amp;= s_1(\zeta)\cdot \big(c(\zeta)u_1 - c(\omega^{2^{n-2}}\cdot\zeta)(1-u_1)\big) \\
\cdots \\
p_{n}(\zeta) &amp;= s_{n-1}(\zeta)\cdot \big(c(\zeta)u_0 - c(\omega\cdot\zeta)(1-u_0)\big) \\
h_1(\zeta) &amp;= L_0(\zeta)\cdot\big(z(\zeta) - a_0\cdot c_0\big) \\
h_2(\zeta) &amp;= (\zeta-1)\cdot\big(z(\zeta)-z(\omega^{-1}\cdot\zeta)-a(\zeta)\cdot c(\zeta)\big) \\
h_3(\zeta) &amp;= L_{N-1}(\zeta)\cdot\big( z(\zeta) - v \big) \\
\end{split}
\end{split}\]</div>
<p>用 <span class="math notranslate nohighlight">\(\alpha\)</span> 来聚合这些多项式求值，得到 <span class="math notranslate nohighlight">\(h(\zeta)\)</span>：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
h(\zeta) &amp;= p_0(\zeta) + \alpha\cdot p_1(\zeta) + \alpha^2\cdot p_2(\zeta) + \cdots + \alpha^{n}\cdot p_{n}(\zeta) \\
&amp;+ \alpha^{n+1} \cdot h_0(\zeta) + \alpha^{n+2} \cdot h_1(\zeta) + \alpha^{n+3} \cdot h_2(\zeta)
\end{split}
\end{split}\]</div>
<p>最后检查下面的等式是否成立：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
h(\zeta) \overset{?}{=} t(\zeta)\cdot v_H(\zeta) \\
\end{split}
\end{split}\]</div>
<p>其中 <span class="math notranslate nohighlight">\(v_H(\zeta)\)</span> 是 <span class="math notranslate nohighlight">\(H\)</span> 的 Vanishing 多项式在 <span class="math notranslate nohighlight">\(\zeta\)</span> 处的取值，由 Verifier 自行计算。</p>
</section>
<section id="ph23-kzg10">
<h2>5. PH23+KZG10 协议流程（简单版）<a class="headerlink" href="#ph23-kzg10" title="Link to this heading">#</a></h2>
<p>本文我们不考虑协议的性能，仅仅展示 PH23+KZG10 的一个简单直接的实现方式。协议主要分为三部分：</p>
<ul class="simple">
<li><p>MLE 多项式的 Commit</p></li>
<li><p>MLE 多项式的 Evaluation Argument 的证明流程</p></li>
<li><p>MLE 多项式的 Evaluation Argument 的验证流程</p></li>
</ul>
<section id="commit">
<h3>Commit<a class="headerlink" href="#commit" title="Link to this heading">#</a></h3>
<p>如果要承诺一个有 <span class="math notranslate nohighlight">\(n\)</span> 个未知数的 MLE 多项式，<span class="math notranslate nohighlight">\(\tilde{f}(X_0, X_1, \ldots, X_{n-1})\)</span> ，定义如下：</p>
<div class="math notranslate nohighlight">
\[
\tilde{f}(X_0, X_1, \ldots, X_{n-1}) = \sum_{i=0}^{N-1} a_i \cdot \overset{\sim}{eq}(\mathsf{bits}(i), (X_0, X_1, \ldots, X_{n-1}))
\]</div>
<p>这里 <span class="math notranslate nohighlight">\(\vec{a}=(a_0,a_1,\ldots,a_{N-1})\)</span> 表示该 MLE 多项式在 <span class="math notranslate nohighlight">\(\{0, 1\}^n\)</span> Boolean HyperCube 上的取值。</p>
<p>首先 Prover 构造一个一元多项式，记为 <span class="math notranslate nohighlight">\(a(X)\)</span>，使其在 Domain <span class="math notranslate nohighlight">\(H\)</span> 上的取值恰好为 <span class="math notranslate nohighlight">\(\vec{a}\)</span>，并且 <span class="math notranslate nohighlight">\(H\)</span> 的大小恰好为 <span class="math notranslate nohighlight">\(N\)</span>。并且， <span class="math notranslate nohighlight">\(H\)</span> 一般是一个 FFT 友好的乘法子群，它可以由一个 N 次单位根（<span class="math notranslate nohighlight">\(N\)</span>-th Root of Unity）来作为生成元（记为 <span class="math notranslate nohighlight">\(\omega\)</span> ）产生：</p>
<div class="math notranslate nohighlight">
\[
H = (1, \omega, \omega^2, \omega^3,\ldots, \omega^{N-1})
\]</div>
<p>那么 <span class="math notranslate nohighlight">\(a(X)\)</span> 定义如下：</p>
<div class="math notranslate nohighlight">
\[
a(X) = a_0\cdot L_0(X) + a_1\cdot L_1(X) + \cdots + a_{N-1}\cdot L_{N-1}(X)
\]</div>
<p>这里 <span class="math notranslate nohighlight">\(\{L_i\}_{i=0}^{N-1}\)</span> 表示基于 <span class="math notranslate nohighlight">\(H\)</span> 的 Lagrange 多项式，其定义如下：</p>
<div class="math notranslate nohighlight">
\[
L_i(X) = \frac{\omega_i\cdot v_H(X)}{N\cdot(X-\omega_i)}, \qquad i=0,1,\ldots, N-1
\]</div>
<p>这里 <span class="math notranslate nohighlight">\(v_H(X)\)</span> 为 <span class="math notranslate nohighlight">\(H\)</span> 上的 Vanishing 多项式，定义如下：</p>
<div class="math notranslate nohighlight">
\[
v_H(X) = (X-1)(X-\omega)(X-\omega^2)\cdots(X-\omega^{N-1})
\]</div>
<p>然后 Prover 计算得到 <span class="math notranslate nohighlight">\(a(X)\)</span> 的系数形式，利用 KZG10 的 SRS 计算 <span class="math notranslate nohighlight">\(a(X)\)</span> 的承诺，记为 <span class="math notranslate nohighlight">\(C_a\)</span></p>
<div class="math notranslate nohighlight">
\[
C_a = b_0\cdot [1]_1 + b_1\cdot [\tau]_1 + b_2 \cdot
[\tau^2]_1 + \cdots + b_{N-1}\cdot[\tau^{N-1}]_1
\]</div>
<p>这里 <span class="math notranslate nohighlight">\((b_0, b_1, \ldots, b_{N-1})\)</span> 为 <span class="math notranslate nohighlight">\(a(X)\)</span> 的系数形式：</p>
<div class="math notranslate nohighlight">
\[
a(X) = b_0 + b_1X+b_2X^2 + \cdots + b_{N-1}X^{N-1}
\]</div>
</section>
<section id="evaluation">
<h3>Evaluation 证明协议<a class="headerlink" href="#evaluation" title="Link to this heading">#</a></h3>
<p>所谓的 Evaluation Argument 是指 Prover 向 Verifier 证明一个多项式承诺 <span class="math notranslate nohighlight">\(C_f\)</span> 所对应的具有 <span class="math notranslate nohighlight">\(n\)</span> 个未知数的 MLE 多项式 <span class="math notranslate nohighlight">\(\tilde{f}\)</span> 在一个公开点 <span class="math notranslate nohighlight">\((u_0, u_1, \ldots, u_{n-1})\)</span> 的取值：</p>
<div class="math notranslate nohighlight">
\[
\tilde{f}(u_0, u_1, u_2, \ldots, u_{n-1}) = v
\]</div>
<p>这里，我们同样假设多项式在公开点的取值也是一个公开的值，记为 <span class="math notranslate nohighlight">\(v\)</span>。</p>
<section id="id3">
<h4>公共输入<a class="headerlink" href="#id3" title="Link to this heading">#</a></h4>
<ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\(C_a=[a(\tau)]_1\)</span>:  对于向量 <span class="math notranslate nohighlight">\(\vec{a}=(a_0, a_1, \ldots, a_{N-1})\)</span> 的一元多项式承诺。其中 <span class="math notranslate nohighlight">\(\vec{a}\)</span> 等于 MLE 多项式 <span class="math notranslate nohighlight">\(\tilde{f}(X_0, X_1, \ldots, X_{n-1})\)</span> 在 n-维 Boolean Hypercube 上的取值，也是 <span class="math notranslate nohighlight">\(a(X)\)</span> 在 <span class="math notranslate nohighlight">\(H\)</span> 上的取值。</p></li>
<li><p><span class="math notranslate nohighlight">\(\vec{u}=(u_0, u_1, \ldots, u_{n-1})\)</span>: MLE 多项式 <span class="math notranslate nohighlight">\(\tilde{f}(X_0, X_1, \ldots, X_{n-1})\)</span> 的求值点</p></li>
<li><p><span class="math notranslate nohighlight">\(v\)</span>: MLE 多项式 <span class="math notranslate nohighlight">\(\tilde{f}(X_0, X_1, \ldots, X_{n-1})\)</span> 在 <span class="math notranslate nohighlight">\(\vec{u}\)</span> 处的取值。</p></li>
</ol>
</section>
<section id="round-1">
<h4>Round 1.<a class="headerlink" href="#round-1" title="Link to this heading">#</a></h4>
<p>Prover:</p>
<ol class="arabic simple">
<li><p>构造多项式 <span class="math notranslate nohighlight">\(c(X)\)</span>, where <span class="math notranslate nohighlight">\(c_i=\overset{\sim}{eq}(\mathsf{bits}(i), \vec{u})\)</span></p></li>
</ol>
<div class="math notranslate nohighlight">
\[
c(X) = \sum_{i=0}^{N-1} c_i \cdot L_i(X)
\]</div>
<ol class="arabic simple" start="2">
<li><p>计算 <span class="math notranslate nohighlight">\(c(X)\)</span> 的承诺 <span class="math notranslate nohighlight">\(C_c = [c(\tau)]_1\)</span>，并发送 <span class="math notranslate nohighlight">\(C_c\)</span></p></li>
</ol>
<div class="math notranslate nohighlight">
\[
C_c =  [c(\tau)]_1 = \mathsf{KZG10.commit}(\vec{c})
\]</div>
</section>
<section id="round-2">
<h4>Round 2.<a class="headerlink" href="#round-2" title="Link to this heading">#</a></h4>
<p>Verifier: 发送随机数 <span class="math notranslate nohighlight">\(\alpha\leftarrow_{\$}\mathbb{F}_p\)</span></p>
<p>Prover:</p>
<ol class="arabic simple">
<li><p>构造 Selector 多项式 <span class="math notranslate nohighlight">\(s_0(X), s_1(X), \ldots, s_{n-1}(X)\)</span></p></li>
</ol>
<div class="math notranslate nohighlight">
\[
s_i(X) = \frac{v_H(X)}{z_{H_i}(X)} = \frac{X^{2^n}-1}{X^{2^i}-1}, \qquad i=0,1,\ldots, n-1
\]</div>
<ol class="arabic simple" start="2">
<li><p>构造 <span class="math notranslate nohighlight">\(\vec{c}\)</span> 的约束多项式 <span class="math notranslate nohighlight">\(p_0(X),\ldots, p_{n-1}(X)\)</span>
$<span class="math notranslate nohighlight">\(
p_0(X) = s_0(X) \cdot \Big( c(X) - (1-u_0)(1-u_1)...(1-u_{n-1}) \Big)
\)</span>$</p></li>
</ol>
<div class="math notranslate nohighlight">
\[
p_k(X) = s_{k-1}(X) \cdot \Big( u_{n-k}\cdot c(X)   - (1-u_{n-k})\cdot c(\omega^{2^{n-k}}\cdot X)\Big), \qquad k = 1\ldots n
\]</div>
<ol class="arabic simple" start="3">
<li><p>构造累加多项式 <span class="math notranslate nohighlight">\(z(X)\)</span> ，满足</p></li>
</ol>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
z(1) &amp;= a_0\cdot c_0 \\
z(\omega_{i}) - z(\omega_{i-1}) &amp;= a(\omega_{i})\cdot c(\omega_{i}), \quad i=1,\ldots, N-1 \\ 
z(\omega^{N-1}) &amp;= v \\
\end{split}
\end{split}\]</div>
<ol class="arabic simple" start="4">
<li><p>构造约束多项式 <span class="math notranslate nohighlight">\(h_0(X), h_1(X), h_2(X)\)</span>，满足
$<span class="math notranslate nohighlight">\(
\begin{split}
h_0(X) &amp;= L_0(X)\cdot\big(z(X) - c_0\cdot a(X) \big) \\
h_1(X) &amp;= (X-1)\cdot\big(z(X)-z(\omega^{-1}\cdot X)-a(X)\cdot c(X)) \\
h_2(X) &amp; = L_{N-1}(X)\cdot\big( z(X) - v \big) \\
\end{split}
\)</span>$</p></li>
<li><p>构造聚合多项式 <span class="math notranslate nohighlight">\(h(X)\)</span>：</p></li>
</ol>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
h(X) &amp;= p_0(X) + \alpha\cdot p_1(X) + \alpha^2\cdot p_2(X) + \cdots + \alpha^{n}\cdot p_{n}(X) \\
&amp;+ \alpha^{n+1} \cdot h_0(X) + \alpha^{n+2} \cdot h_1(X) + \alpha^{n+3} \cdot h_2(X)
\end{split}
\end{split}\]</div>
<ol class="arabic simple" start="6">
<li><p>计算 Quotient 多项式 <span class="math notranslate nohighlight">\(t(X)\)</span>，满足</p></li>
</ol>
<div class="math notranslate nohighlight">
\[
t(X)\cdot v_H(X) = h(X)
\]</div>
<ol class="arabic simple" start="7">
<li><p>计算多项式承诺 <span class="math notranslate nohighlight">\(C_t=[t(\tau)]_1\)</span>， <span class="math notranslate nohighlight">\(C_z=[z(\tau)]_1\)</span>，并发送 <span class="math notranslate nohighlight">\(C_t\)</span> 和 <span class="math notranslate nohighlight">\(C_z\)</span></p></li>
</ol>
</section>
<section id="round-3">
<h4>Round 3.<a class="headerlink" href="#round-3" title="Link to this heading">#</a></h4>
<p>Verifier: 发送随机求值点 <span class="math notranslate nohighlight">\(\zeta\leftarrow_{\$}\mathbb{F}_p\)</span></p>
<p>Prover:</p>
<ol class="arabic simple">
<li><p>计算 <span class="math notranslate nohighlight">\(s_i(X)\)</span> 在 <span class="math notranslate nohighlight">\(\zeta\)</span> 处的取值：</p></li>
</ol>
<div class="math notranslate nohighlight">
\[
s_0(\zeta), s_1(\zeta), \ldots, s_{n-1}(\zeta)
\]</div>
<ol class="arabic simple" start="2">
<li><p>定义一个新的 Domain <span class="math notranslate nohighlight">\(D\)</span>，包含 <span class="math notranslate nohighlight">\(n+1\)</span> 个元素：</p></li>
</ol>
<div class="math notranslate nohighlight">
\[
D = \{\omega, \omega^2,\omega^4, \ldots, \omega^{2^{n-1}}, 1\}
\]</div>
<p>它的陪集 <span class="math notranslate nohighlight">\(D'=\zeta D\)</span> 是 Prover 要计算 <span class="math notranslate nohighlight">\(c(X)\)</span> 的求值点的集合。</p>
<div class="math notranslate nohighlight">
\[
D'=\zeta D = \{\zeta\omega, \zeta\omega^2,\zeta\omega^4, \ldots, \zeta\omega^{2^{n-1}}, \zeta\}
\]</div>
<ol class="arabic simple" start="3">
<li><p>计算 <span class="math notranslate nohighlight">\(c(\zeta\cdot\omega), c(\zeta\cdot\omega^2), c(\zeta\cdot\omega^4), \ldots, c(\zeta\cdot\omega^{2^{n-1}})\)</span>, <span class="math notranslate nohighlight">\(c(\zeta)\)</span></p></li>
<li><p>计算 <span class="math notranslate nohighlight">\(z(\zeta), z(\omega^{-1}\cdot\zeta)\)</span> ，<span class="math notranslate nohighlight">\(t(\zeta), a(\zeta)\)</span></p></li>
<li><p>发送这些多项式的取值：</p></li>
</ol>
<div class="math notranslate nohighlight">
\[
\big(a(\zeta), c(\zeta), c(\zeta\cdot\omega), c(\zeta\cdot\omega^2), \ldots, c(\zeta\cdot\omega^{2^{n-1}}), z(\zeta), z(\zeta\cdot\omega^{-1}), t(\zeta)\big)
\]</div>
<ol class="arabic simple" start="6">
<li><p>发送 KZG10 的求值证明</p></li>
</ol>
<div class="math notranslate nohighlight">
\[
\pi_{kzg10} = \big(\pi_{a(\zeta)}, \pi_{c(\zeta)}, \pi_{c(\zeta\cdot\omega)}, \pi_{c(\zeta\cdot\omega^2)}, \ldots, \pi_{c(\zeta\cdot\omega^{2^{n-1}})}, \pi_{z(\zeta)}, \pi_{z(\zeta\cdot\omega^{-1})}, \pi_{t(\zeta)}\big)
\]</div>
</section>
<section id="verification">
<h4>Verification<a class="headerlink" href="#verification" title="Link to this heading">#</a></h4>
<p>证明 <span class="math notranslate nohighlight">\(\pi\)</span> 包含下面的元素：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\pi = \left(\begin{array}{c}
C_t, C_z, C_c, a(\zeta), z(\zeta), z(\zeta\cdot\omega^{-1}), t(\zeta), \\[1.5ex]
c(\zeta), c(\zeta\cdot\omega), c(\zeta\cdot\omega^2), \ldots, c(\zeta\cdot\omega^{2^{n-1}}), \\[1.5ex]
\pi_{a(\zeta)}, \pi_{z(\zeta)}, \pi_{z(\zeta\cdot\omega^{-1})}, \pi_{t(\zeta)}, \\[1.5ex]
\pi_{c(\zeta)}, \pi_{c(\zeta\cdot\omega)}, \pi_{c(\zeta\cdot\omega^2)}, \ldots, \pi_{c(\zeta\cdot\omega^{2^{n-1}})}, 
\end{array}\right)
\end{split}\]</div>
<p>Verifier 先计算出  <span class="math notranslate nohighlight">\(s_0(\zeta), \ldots, s_{n-1}(\zeta)\)</span> ，<span class="math notranslate nohighlight">\(v_H(\zeta)\)</span> ，<span class="math notranslate nohighlight">\(L_0(\zeta), L_{N-1}(\zeta)\)</span> 。</p>
<p>Verifier 需要验证下面的等式，来完成对多项式 <span class="math notranslate nohighlight">\(a(X)\)</span>, <span class="math notranslate nohighlight">\(c(X)\)</span>, <span class="math notranslate nohighlight">\(t(X)\)</span>, <span class="math notranslate nohighlight">\(z(X)\)</span> 多项式的求值证明的验证过程：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
\mathsf{KZG.Verify}(C_a, \zeta, a(\zeta), \pi_{a(\zeta)}) &amp;\overset{?}{=} 1  \\
\mathsf{KZG.Verify}(C_t, \zeta, t(\zeta), \pi_{t(\zeta)}) &amp;\overset{?}{=} 1  \\
\mathsf{KZG.Verify}(C_z, \zeta, z(\zeta), \pi_{z(\zeta)}) &amp;\overset{?}{=} 1  \\
\mathsf{KZG.Verify}(C_z, \zeta\omega^{-1}, z(\zeta\omega^{-1}), \pi_{z(\zeta\omega^{-1})}) &amp;\overset{?}{=} 1  \\
\mathsf{KZG.Verify}(C_c, \zeta, c(\zeta), \pi_{c(\zeta)}) &amp;\overset{?}{=} 1  \\
\mathsf{KZG.Verify}(C_c, \zeta\omega, c(\zeta\omega), \pi_{c(\zeta\omega)}) &amp;\overset{?}{=} 1  \\ 
\mathsf{KZG.Verify}(C_c, \zeta\omega^2, c(\zeta\omega^2), \pi_{c(\zeta\omega^2)}) &amp;\overset{?}{=} 1  \\
\cdots \\
\mathsf{KZG.Verify}(C_c, \zeta\omega^{2^{n-1}}, c(\zeta\omega^{2^{n-1}}), \pi_{c(\zeta\omega^{2^{n-1}})}) &amp;\overset{?}{=} 1  \\
\end{aligned}
\end{split}\]</div>
<p>Verifier 用多项式在 <span class="math notranslate nohighlight">\(X=\zeta\)</span> 处的取值来验证下面的约束等式：</p>
<div class="math notranslate nohighlight">
\[
t(\zeta)\cdot v_H(\zeta) \overset{?}{=} \Big(\sum_{i=0}^{n} \alpha^i\cdot p_i(\zeta)\Big) + \alpha^{n+1}\cdot h_0(\zeta) + \alpha^{n+2}\cdot h_1(\zeta) + \alpha^{n+3}\cdot h_2(\zeta)
\]</div>
<p>这里 <span class="math notranslate nohighlight">\(p_0(\zeta),\ldots, p_{n}(\zeta), h_0(\zeta), h_1(\zeta), h_2(\zeta)\)</span> 的定义如下：</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{split}
p_0(\zeta) &amp;= s_0(\zeta)\cdot \big(c(\zeta) - (1-u_0)(1-u_1)\cdots(1-u_{n-1})\big) \\
p_1(\zeta) &amp;= s_0(\zeta)\cdot \big(c(\zeta)u_{n-1} - c(\omega^{2^{n-1}}\cdot\zeta)(1-u_{n-1})\big) \\
p_2(\zeta) &amp;= s_1(\zeta)\cdot \big(c(\zeta)u_1 - c(\omega^{2^{n-2}}\cdot\zeta)(1-u_1)\big) \\
\cdots \\
p_{n}(\zeta) &amp;= s_{n-1}(\zeta)\cdot \big(c(\zeta)u_0 - c(\omega\cdot\zeta)(1-u_0)\big) \\
h_0(\zeta) &amp;= L_0(\zeta)\cdot\big(z(\zeta) - a_0\cdot c_0\big) \\
h_1(\zeta) &amp;= (\zeta-1)\cdot\big(z(\zeta)-z(\zeta\omega^{-1})-a(\zeta)\cdot c(\zeta)\big) \\
h_2(\zeta) &amp;= L_{N-1}(\zeta)\cdot\big( z(\zeta) - v \big) \\
\end{split}
\end{split}\]</div>
</section>
</section>
</section>
<section id="id4">
<h2>总结<a class="headerlink" href="#id4" title="Link to this heading">#</a></h2>
<p>PH23 PCS Adaptor 是将 MLE 多项式的 Evaluations 映射到一个一元多项式的 Evaluations，然后再利用「求和证明」来保证 MLE 多项式运算的正确性。</p>
<p>我们将在后续文章优化和改进这个协议。</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>[PH23] Papini, Shahar, and Ulrich Haböck. “Improving logarithmic derivative lookups using GKR.” Cryptology ePrint Archive (2023). <a class="reference external" href="https://eprint.iacr.org/2023/1284">https://eprint.iacr.org/2023/1284</a></p></li>
<li><p>[KT23] Kohrita, Tohru, and Patrick Towa. “Zeromorph: Zero-knowledge multilinear-evaluation proofs from homomorphic univariate commitments.” Cryptology ePrint Archive (2023). <a class="reference external" href="https://eprint.iacr.org/2023/917">https://eprint.iacr.org/2023/917</a></p></li>
<li><p>[ZXZS20] Jiaheng Zhang, Tiancheng Xie, Yupeng Zhang, and Dawn Song. “Transparent polynomial delegation and its applications to zero knowledge proof.” 2020 IEEE Symposium on Security and Privacy (SP). IEEE, 2020. <a class="reference external" href="https://eprint.iacr.org/2019/1482">https://eprint.iacr.org/2019/1482</a></p></li>
<li><p>[KZG10] Kate, Aniket, Gregory M. Zaverucha, and Ian Goldberg. “Constant-size commitments to polynomials and their applications.” Advances in Cryptology-ASIACRYPT 2010: 16th International Conference on the Theory and Application of Cryptology and Information Security, Singapore, December 5-9, 2010. Proceedings 16. Springer Berlin Heidelberg, 2010.</p></li>
<li><p>[CHMMVW19] Alessandro Chiesa, Yuncong Hu, Mary Maller, Pratyush Mishra, Psi Vesely, and Nicholas Ward. “Marlin: Preprocessing zkSNARKs with universal and updatable SRS.” Advances in Cryptology–EUROCRYPT 2020: 39th Annual International Conference on the Theory and Applications of Cryptographic Techniques, Zagreb, Croatia, May 10–14, 2020, Proceedings, Part I 39. Springer International Publishing, 2020.</p></li>
<li><p>[BCRSVW19] Eli Ben-Sasson, Alessandro Chiesa, Michael Riabzev, Nicholas Spooner, Madars Virza, and Nicholas P. Ward. “Aurora: Transparent succinct arguments for R1CS.” Advances in Cryptology–EUROCRYPT 2019: 38th Annual International Conference on the Theory and Applications of Cryptographic Techniques, Darmstadt, Germany, May 19–23, 2019, Proceedings, Part I 38. Springer International Publishing, 2019.</p></li>
<li><p>[RZ21] Carla Ràfols and Arantxa Zapico. An algebraic framework for universal and updatable SNARKs. In Tal Malkin and Chris Peikert, editors, CRYPTO 2021, Part I, volume 12825 of LNCS, pages 774–804, Virtual Event, August 2021. Springer, Heidelberg.</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./ph23"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../virgo-pcs/virgo-pcs-01.zh.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Notes on Virgo-PCS</p>
      </div>
    </a>
    <a class="right-next"
       href="ph23-pcs-02.zh.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">缺失的协议 PH23-PCS（二）</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">1. 原理概述</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#well-formedness-of-vec-c">2. Well-Formedness of <span class="math notranslate nohighlight">\(\vec{c}\)</span></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">多项式约束等式</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inner-product">3. 证明 Inner Product</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#univariate-sumcheck">Univariate Sumcheck</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grand-sum">Grand Sum</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kzg10">4. 对接 KZG10</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ph23-kzg10">5. PH23+KZG10 协议流程（简单版）</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#commit">Commit</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluation">Evaluation 证明协议</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">公共输入</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#round-1">Round 1.</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#round-2">Round 2.</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#round-3">Round 3.</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#verification">Verification</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">总结</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>